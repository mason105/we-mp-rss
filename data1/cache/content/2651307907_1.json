{
  "id": "2651307907_1",
  "title": "视频丨吴桂英开展“七一”走访慰问并为基层党支部讲党课",
  "content": "<div class=\"share_notice_wrp\" id=\"js_content\">\n <div class=\"share_notice\" id=\"js_common_share_desc_wrap\" style=\"display: none\">\n  <div class=\"weui-ellipsis__text__wrp\">\n   <span class=\"weui-ellipsis__text\" id=\"js_common_share_desc\">\n   </span>\n  </div>\n  <script nonce=\"567307046\" reportloaderror=\"\" type=\"text/javascript\">\n   var __INLINE_SCRIPT__ = (function () {\n  'use strict';\n\n  function _arrayLikeToArray$2(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n    return arr2;\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray$2(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray$2(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray$2(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$2(o, minLen);\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray$2(arr) || _nonIterableSpread();\n  }\n\n  function textOverflow(el, binding) {\n    var _a, _b;\n    var text = el.innerHTML;\n    if (!text || !text.length) return;\n    var retainTail = [];\n    if ((_a = binding.value) === null || _a === void 0 ? void 0 : _a.tailNum) {\n      retainTail = Array.from(el.childNodes).slice(-binding.value.tailNum);\n    }\n    var count = 0;\n    function needTextOverflow() {\n      var _a;\n      if ((_a = binding.value) === null || _a === void 0 ? void 0 : _a.lineClamp) {\n        return binding.value.lineClamp < computeLineNum(el);\n      }\n      return el.offsetHeight < el.scrollHeight;\n    }\n    if (needTextOverflow()) {\n      try {\n        var getLeaf = function getLeaf(node) {\n          var result = [];\n          if (!node.childNodes || node.childNodes.length === 0) {\n            return [node];\n          }\n          node.childNodes.forEach(function (child) {\n            result = [].concat(_toConsumableArray(result), _toConsumableArray(getLeaf(child)));\n          });\n          return result;\n        };\n        var getFragmentHTML = function getFragmentHTML(frag) {\n          var _a, _b;\n          var div = document.createDocumentFragment();\n          div.appendChild(frag);\n          var span = document.createElement('span');\n          span.innerHTML = ((_a = binding.value) === null || _a === void 0 ? void 0 : _a.html) || '...';\n          if (div.lastElementChild) {\n            div.lastElementChild.style.display = 'inline';\n          }\n          div.appendChild(span);\n          el.extraElement = span;\n          if ((_b = binding.value) === null || _b === void 0 ? void 0 : _b.tailNum) {\n            retainTail.forEach(function (tail) {\n              div.appendChild(tail);\n            });\n          }\n          return div;\n        };\n        var findLastNode = function findLastNode(start, end) {\n          if (end - start <= 1) {\n            range.setEndAfter(leaves[start]);\n            setNewFrag(el, getFragmentHTML(range.cloneContents()));\n            return needTextOverflow() ? start : end;\n          }\n          var mid = start + end >> 1;\n          count++;\n          range.setEndAfter(leaves[mid]);\n          setNewFrag(el, getFragmentHTML(range.cloneContents()));\n          return needTextOverflow() ? findLastNode(start, mid) : findLastNode(mid, end);\n        };\n        var findLastCharIndex = function findLastCharIndex(start, end) {\n          if (end - start <= 1) {\n            if (start === 0) {\n              range.setEndAfter(leaves[Math.max(lastNodeIndex - 1, 0)]);\n            } else {\n              range.setEnd(lastNode, start);\n            }\n            setNewFrag(el, getFragmentHTML(range.cloneContents()));\n            return start;\n          }\n          var mid = start + end >> 1;\n          count++;\n          range.setEnd(lastNode, mid);\n          setNewFrag(el, getFragmentHTML(range.cloneContents()));\n          return needTextOverflow() ? findLastCharIndex(start, mid) : findLastCharIndex(mid, end);\n        };\n        var dom = document.createElement('div');\n        dom.innerHTML = text;\n        var leaves = getLeaf(dom);\n        var range = document.createRange();\n        range.setStartBefore(leaves[0]);\n        var lastNodeIndex = findLastNode(0, leaves.length - 1);\n        var lastNode = leaves[lastNodeIndex];\n        findLastCharIndex(0, lastNode.textContent.length);\n        ((_b = binding.value) === null || _b === void 0 ? void 0 : _b.processExtraElement) && binding.value.processExtraElement(el.extraElement, el);\n        console.log(count);\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }\n  function computeLineNum(el) {\n    var computyStyle = getComputedStyle(el);\n    return Math.round(el.offsetHeight / parseFloat(computyStyle.lineHeight));\n  }\n  function removeAllChild(el) {\n    var childNodes = Array.from(el.childNodes);\n    childNodes.forEach(function (child) {\n      el.removeChild(child);\n    });\n  }\n  function setNewFrag(el, frag) {\n    removeAllChild(el);\n    el.appendChild(frag);\n  }\n\n  \n  \n  var Device = {};\n  function detect(ua) {\n    var MQQBrowser = ua.match(/MQQBrowser\\/(\\d+\\.\\d+)/i);\n    var MQQClient = ua.match(/QQ\\/(\\d+\\.(\\d+)\\.(\\d+)\\.(\\d+))/i) || ua.match(/V1_AND_SQ_([\\d\\.]+)/);\n    var WeChat = ua.match(/MicroMessenger\\/((\\d+)\\.(\\d+))\\.(\\d+)/) || ua.match(/MicroMessenger\\/((\\d+)\\.(\\d+))/);\n    var MacOS = ua.match(/Mac\\sOS\\sX\\s(\\d+[\\.|_]\\d+)/);\n    var WinOS = ua.match(/Windows(\\s+\\w+)?\\s+?(\\d+\\.\\d+)/);\n    var Linux = ua.match(/Linux\\s/);\n    var MiuiBrowser = ua.match(/MiuiBrowser\\/(\\d+\\.\\d+)/i);\n    var M1 = ua.match(/MI-ONE/);\n    var MIPAD = ua.match(/MI PAD/);\n    var UC = ua.match(/UCBrowser\\/(\\d+\\.\\d+(\\.\\d+\\.\\d+)?)/) || ua.match(/\\sUC\\s/);\n    var IEMobile = ua.match(/IEMobile(\\/|\\s+)(\\d+\\.\\d+)/) || ua.match(/WPDesktop/);\n    var ipod = ua.match(/(ipod).*\\s([\\d_]+)/i);\n    var ipad = ua.match(/(ipad).*\\s([\\d_]+)/i);\n    var iphone = ua.match(/(iphone)\\sos\\s([\\d_]+)/i);\n    var Chrome = ua.match(/Chrome\\/(\\d+\\.\\d+)/);\n    var AndriodBrowser = ua.match(/Mozilla.*Linux.*Android.*AppleWebKit.*Mobile Safari/);\n    var android = ua.match(/(android)\\s([\\d\\.]+)/i);\n    var harmony = ua.match(/(OpenHarmony)\\s([\\d\\.]+)/i);\n    Device.browser = Device.browser || {}, Device.os = Device.os || {};\n    if (window.ActiveXObject) {\n      var vie = 6;\n      (window.XMLHttpRequest || ua.indexOf('MSIE 7.0') > -1) && (vie = 7);\n      (window.XDomainRequest || ua.indexOf('Trident/4.0') > -1) && (vie = 8);\n      ua.indexOf('Trident/5.0') > -1 && (vie = 9);\n      ua.indexOf('Trident/6.0') > -1 && (vie = 10);\n      Device.browser.ie = true, Device.browser.version = vie;\n    } else if (ua.indexOf('Trident/7.0') > -1) {\n      Device.browser.ie = true, Device.browser.version = 11;\n    }\n    if (android) {\n      Device.os.android = true;\n      Device.os.version = android[2];\n    }\n    if (harmony) {\n      Device.os.harmony = true;\n      Device.os.version = harmony[2];\n    }\n    if (ipod) {\n      Device.os.ios = Device.os.ipod = true;\n      Device.os.version = ipod[2].replace(/_/g, '.');\n    }\n    if (ipad) {\n      Device.os.ios = Device.os.ipad = true;\n      Device.os.version = ipad[2].replace(/_/g, '.');\n    }\n    if (iphone) {\n      Device.os.iphone = Device.os.ios = true;\n      Device.os.version = iphone[2].replace(/_/g, '.');\n    }\n    if (WinOS) Device.os.windows = true, Device.os.version = WinOS[2];\n    if (MacOS) Device.os.Mac = true, Device.os.version = MacOS[1];\n    if (Linux) Device.os.Linux = true;\n    if (ua.indexOf('lepad_hls') > 0) Device.os.LePad = true;\n    if (MIPAD) Device.os.MIPAD = true;\n    if (MQQBrowser) Device.browser.MQQ = true, Device.browser.version = MQQBrowser[1];\n    if (MQQClient) Device.browser.MQQClient = true, Device.browser.version = MQQClient[1];\n    if (WeChat) Device.browser.WeChat = true, Device.browser.mmversion = Device.browser.version = WeChat[1];\n    if (MiuiBrowser) Device.browser.MIUI = true, Device.browser.version = MiuiBrowser[1];\n    if (UC) Device.browser.UC = true, Device.browser.version = UC[1] || NaN;\n    if (IEMobile) Device.browser.IEMobile = true, Device.browser.version = IEMobile[2];\n    if (AndriodBrowser) {\n      Device.browser.AndriodBrowser = true;\n    }\n    if (M1) {\n      Device.browser.M1 = true;\n    }\n    if (Chrome) {\n      Device.browser.Chrome = true, Device.browser.version = Chrome[1];\n    }\n    if (Device.os.windows) {\n      if (typeof navigator.platform !== \"undefined\" && navigator.platform.toLowerCase() == \"win64\") {\n        Device.os.win64 = true;\n      } else {\n        Device.os.win64 = false;\n      }\n    }\n    if (Device.os.Mac || Device.os.windows || Device.os.Linux) {\n      Device.os.pc = true;\n    }\n    var osType = {\n      iPad7: 'iPad; CPU OS 7',\n      LePad: 'lepad_hls',\n      XiaoMi: 'MI-ONE',\n      SonyDTV: \"SonyDTV\",\n      SamSung: 'SAMSUNG',\n      HTC: 'HTC',\n      VIVO: 'vivo'\n    };\n    for (var os in osType) {\n      Device.os[os] = ua.indexOf(osType[os]) !== -1;\n    }\n    Device.os.phone = Device.os.phone || /windows phone/i.test(ua);\n    Device.os.getNumVersion = function () {\n      return parseFloat(Device.os.version);\n    };\n    Device.os.hasTouch = 'ontouchstart' in window;\n    if (Device.os.hasTouch && Device.os.ios && Device.os.getNumVersion() < 6) {\n      Device.os.hasTouch = false;\n    }\n    if (Device.browser.WeChat && Device.browser.version < 5.0) {\n      Device.os.hasTouch = false;\n    }\n    Device.browser.getNumVersion = function () {\n      return parseFloat(Device.browser.version);\n    };\n    Device.browser.isFFCanOcx = function () {\n      return !!Device.browser.firefox && Device.browser.getNumVersion() >= 3.0;\n    };\n    Device.browser.isCanOcx = function () {\n      return !!Device.os.windows && (!!Device.browser.ie || Device.browser.isFFCanOcx() || !!Device.browser.webkit);\n    };\n    Device.browser.isNotIESupport = function () {\n      return !!Device.os.windows && (!!Device.browser.webkit || Device.browser.isFFCanOcx());\n    };\n    Device.userAgent = {};\n    Device.userAgent.browserVersion = Device.browser.version;\n    Device.userAgent.osVersion = Device.os.version;\n    Device.os.unifiedPC = ua.match(/UnifiedPC/);\n    delete Device.userAgent.version;\n  }\n  detect(window.navigator.userAgent);\n  function canSupportH5Video() {\n    var ua = window.navigator.userAgent,\n      m = null;\n    if (!!Device.os.android) {\n      if (Device.browser.MQQ && Device.browser.getNumVersion() >= 4.2) {\n        return true;\n      }\n      if (ua.indexOf('MI2') != -1) {\n        return true;\n      }\n      if (Device.os.version >= '4' && (m = ua.match(/MicroMessenger\\/((\\d+)\\.(\\d+))\\.(\\d+)/))) {\n        if (parseFloat(m[1]) >= 4.2) {\n          return true;\n        }\n      }\n      if (Device.os.version >= '4.1') {\n        return true;\n      }\n    }\n    return false;\n  }\n  function canSupportVideoMp4() {\n    var video = document.createElement('video');\n    if (typeof video.canPlayType === 'function') {\n      if (video.canPlayType('video/mp4; codecs=\"mp4v.20.8\"') === 'probably') {\n        return true;\n      }\n      if (video.canPlayType('video/mp4; codecs=\"avc1.42E01E\"') === 'probably' || video.canPlayType('video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"') === 'probably') {\n        return true;\n      }\n    }\n    return false;\n  }\n  function canSupportAutoPlay() {\n    if (Device.os.ios && Device.os.getNumVersion() < 10) {\n      return false;\n    }\n    return true;\n  }\n  function isLockdownMode() {\n    if (!Device.os.ios || Device.os.getNumVersion() < 16) {\n      return false;\n    }\n    if (typeof WebAssembly === 'undefined' && typeof OfflineAudioContext === 'undefined' && typeof WebGLRenderingContext === 'undefined') {\n      return true;\n    }\n    return false;\n  }\n  Device.canSupportVideo = canSupportVideoMp4 || canSupportH5Video;\n  Device.canSupportVideoMp4 = canSupportVideoMp4;\n  Device.canSupportH5Video = canSupportH5Video;\n  Device.canSupportAutoPlay = canSupportAutoPlay;\n  Device.isLockdownMode = isLockdownMode;\n  \n  Device.cpVersion = function (version) {\n    var cp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var canEqual = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var nowVersionStr = Device.os.version;\n    if (!nowVersionStr) return false;\n    var versionArr = version.split('.');\n    var nowVersionArr = nowVersionStr.split('.');\n    for (var i = 0; i < Math.max(nowVersionArr.length, versionArr.length); i++) {\n      var vi = +versionArr[i];\n      var nvi = +nowVersionArr[i];\n      if (vi === nvi) continue;\n      if (cp > 0) return vi > nvi;\n      if (cp < 0) return vi < nvi;\n    }\n    return canEqual || cp === 0;\n  };\n\n  function _createForOfIteratorHelper$1(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray$1(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n  function _unsupportedIterableToArray$1(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray$1(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$1(o, minLen); }\n  function _arrayLikeToArray$1(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n  \n  \n  var ua$1 = navigator.userAgent;\n  var is_ios = /(iPhone|iPad|iPod|iOS)/i.test(ua$1);\n  var is_wp = /Windows\\sPhone/i.test(ua$1);\n  var is_android$1 = /(Android)/i.test(ua$1);\n  var is_wechat = /MicroMessenger\\/([\\d\\.]+)/i.test(ua$1);\n  var is_mac = /mac\\sos/i.test(ua$1) && !is_ios;\n  var is_windows = /windows\\snt/i.test(ua$1) && !is_wp;\n  var is_mpapp = /MPAPP\\/([\\d\\.]+)/i.test(ua$1);\n  var is_ipad = /iPad/i.test(ua$1);\n  var is_windows_wechat = /WindowsWechat/i.test(ua$1);\n  var is_mac_wechat = /MacWechat/i.test(ua$1) || /wechat.*mac os/i.test(ua$1);\n  var is_prefetch = is_wechat && window.WeixinPrefecherJSBridge;\n  var is_donut_app = /SAAASDK/i.test(ua$1);\n  var is_harmony = /OpenHarmony|ArkWeb/i.test(ua$1);\n  var is_linux = /Linux\\s/i.test(ua$1);\n  var is_in_miniProgram = is_android$1 && /miniprogram/.test(ua$1.toLowerCase()) || window.__wxjs_environment == 'miniprogram';\n  var is_wx_work = /wxwork/i.test(ua$1);\n  function getUrlParams() {\n    var vars = location.search.substring(1).split('&');\n    var params = {};\n    var _iterator = _createForOfIteratorHelper$1(vars),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var ele = _step.value;\n        var pair = ele.split('=');\n        var key = decodeURIComponent(pair[0]);\n        if (typeof params[key] === 'undefined') {\n          params[key] = decodeURIComponent(pair[1]);\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return params;\n  }\n  function get() {\n    var reg = /MicroMessenger\\/([\\d\\.]+)/i;\n    var ret = ua$1.match(reg);\n    if (ret && ret[1]) {\n      return ret[1];\n    }\n    return false;\n  }\n  function getMac() {\n    var reg = /MacWechat\\/([\\d\\.]+)/i;\n    var ret = ua$1.match(reg);\n    if (ret && ret[1]) {\n      return ret[1];\n    }\n    return false;\n  }\n  function getMacOS() {\n    var reg = /Mac OS X ([\\d_]+)/i;\n    var ret = ua$1.match(reg);\n    if (ret && ret[1]) {\n      return ret[1].replace(/_/g, '.');\n    }\n    return false;\n  }\n  function getWindows() {\n    var reg = /WindowsWechat\\(0x(.+?)\\)/i;\n    var ret = ua$1.match(reg);\n    if (ret && ret[1]) {\n      return ret[1];\n    }\n    return false;\n  }\n  function getWxWork() {\n    var reg = /wxwork\\/([\\d\\.]+)/i;\n    var ret = ua$1.match(reg);\n    if (ret && ret[1]) {\n      return ret[1];\n    }\n    return false;\n  }\n  function getMpApp() {\n    var appVersion = [2, 4, 5];\n    var match = navigator.userAgent.match(/MPAPP\\/(\\d+(\\.\\d+)*)/);\n    if (match) {\n      appVersion = match[1].split('.').map(function (v) {\n        return Number(v);\n      });\n    }\n    return appVersion.join('.');\n  }\n  function getUnifiedPcVer() {\n    var versionInfo = navigator.userAgent.match(/UnifiedPC\\w+Wechat\\(0xf\\w{2}(\\w+?)\\w{2}\\)/);\n    if (versionInfo && versionInfo.length === 2) {\n      var version = versionInfo[1];\n      var mainVersion = getVersionNumber(version.slice(0, 1));\n      var subVersion = getVersionNumber(version.slice(1, 2));\n      var subVersion2 = getVersionNumber(version.slice(2, 3));\n      return [mainVersion, subVersion, subVersion2].join('.');\n    }\n  }\n  function getVersionNumber(hexStr) {\n    return Number(Number(\"0x\".concat(hexStr)).toString(10));\n  }\n  function getWindowsVersionFormat() {\n    var versionInfo = navigator.userAgent.match(/WindowsWechat\\(0x(\\w+?)\\)/);\n    if (versionInfo && versionInfo.length === 2) {\n      var version = versionInfo[1];\n      var mainVersion = getVersionNumber(version.slice(1, 2));\n      var subVersion = getVersionNumber(version.slice(2, 4));\n      var subVersion2 = getVersionNumber(version.slice(4, 6));\n      return [mainVersion, subVersion, subVersion2].join('.');\n    }\n    return false;\n  }\n  function getInner() {\n    var reg = /MicroMessenger\\/[\\d\\.]+\\(0x(.+?)\\)/i;\n    var ret = ua$1.match(reg);\n    if (ret && ret[1] && ret[1] != null) {\n      return ret[1];\n    }\n    if (!ret && /MicroMessenger\\/[\\d\\.]+/i.test(ua$1)) {\n      var urlParams = getUrlParams();\n      if (urlParams.version) {\n        return urlParams.version;\n      }\n    }\n    return false;\n  }\n  var opfunc = {\n    'cp-1': function cp1(a, b) {\n      return a < b;\n    },\n    cp0: function cp0(a, b) {\n      return a === b;\n    },\n    cp1: function cp1(a, b) {\n      return a > b;\n    }\n  };\n  function cpVersion(ver, op, canEq, type) {\n    var mmver = false;\n    switch (type) {\n      case 'mac':\n        mmver = getMac();\n        break;\n      case 'windows':\n        mmver = getWindowsVersionFormat();\n        break;\n      case 'wxwork':\n        mmver = getWxWork();\n        break;\n      case 'mpapp':\n        mmver = getMpApp();\n        break;\n      case 'unifiedpc':\n        mmver = getUnifiedPcVer();\n        break;\n      default:\n        mmver = get();\n        break;\n    }\n    if (!mmver) {\n      return;\n    }\n    var mmversion = mmver.split('.');\n    var version = ver.split('.');\n    if (!/\\d+/g.test(mmversion[mmversion.length - 1])) {\n      mmversion.pop();\n    }\n    for (var i = 0, len = Math.max(mmversion.length, version.length); i < len; ++i) {\n      var mmv = mmversion[i] || '';\n      var v = version[i] || '';\n      var mmvn = parseInt(mmv, 10) || 0;\n      var vn = parseInt(v, 10) || 0;\n      var eq = opfunc.cp0(mmvn, vn);\n      if (eq) {\n        continue;\n      }\n      var cp = opfunc[\"cp\".concat(op)];\n      return cp(mmvn, vn);\n    }\n    return canEq || op === 0;\n  }\n  function eqVersion(version) {\n    return cpVersion(version, 0);\n  }\n  function gtVersion(version, canEq) {\n    return cpVersion(version, 1, canEq);\n  }\n  function ltVersion(version, canEq) {\n    return cpVersion(version, -1, canEq);\n  }\n  function getPlatform() {\n    if (is_ios) {\n      return 'ios';\n    }\n    if (is_android$1) {\n      return 'android';\n    }\n    if (is_mac) {\n      return 'mac_os';\n    }\n    if (is_windows) {\n      return 'windows';\n    }\n    return 'unknown';\n  }\n  var is_google_play = false;\n  var inner_ver_for_google_play_check = getInner();\n  if (is_android$1 && inner_ver_for_google_play_check) {\n    var v = \"0x\".concat(inner_ver_for_google_play_check.substr(-2));\n    if (parseInt(v) >= 64 && parseInt(v) <= 79) {\n      is_google_play = true;\n    }\n  }\n  function compareHexVersion(hexNum) {\n    var innerVersion = getInner();\n    if (innerVersion && hexNum) {\n      if (typeof hexNum === 'string') {\n        hexNum = parseInt(hexNum, 16);\n      }\n      var version = parseInt(innerVersion, 16);\n      return version >= hexNum;\n    }\n    return false;\n  }\n  var Mmversion = {\n    get: get,\n    getMac: getMac,\n    getMacOS: getMacOS,\n    getWindows: getWindows,\n    getInner: getInner,\n    getWxWork: getWxWork,\n    getMpApp: getMpApp,\n    cpVersion: cpVersion,\n    eqVersion: eqVersion,\n    gtVersion: gtVersion,\n    ltVersion: ltVersion,\n    getPlatform: getPlatform,\n    getVersionNumber: getVersionNumber,\n    isWp: is_wp,\n    isIOS: is_ios,\n    isAndroid: is_android$1,\n    isHarmony: is_harmony,\n    isHarmonyWechat: is_harmony && is_wechat && cpVersion('1.0.0', 1, true),\n    isInMiniProgram: is_in_miniProgram,\n    isWechat: is_wechat,\n    isMac: is_mac,\n    isWindows: is_windows,\n    isLinux: is_linux,\n    isMacWechat: is_mac_wechat,\n    isWindowsWechat: is_windows_wechat,\n    isWxWork: is_wx_work,\n    isOnlyWechat: is_wechat && !is_wx_work,\n    isMpapp: is_mpapp,\n    isNewMpApp: false,\n    isIPad: is_ipad,\n    isGooglePlay: is_google_play,\n    isPrefetch: is_prefetch,\n    isDonutAPP: is_donut_app,\n    compareHexVersion: compareHexVersion\n  };\n\n  Device.os.ipad && Device.os.getNumVersion() >= 13 && Device.os.getNumVersion() < 14;\n  function getScaleByDom() {\n    var fontDom = document.createElement('div');\n    fontDom.style.fontSize = '16px';\n    document.body.appendChild(fontDom);\n    var originFontSize = parseFloat(fontDom.style.fontSize);\n    var realFontSize = parseFloat(window.getComputedStyle(fontDom, null).getPropertyValue('font-size'));\n    document.body.removeChild(fontDom);\n    var percent = realFontSize / originFontSize;\n    return percent;\n  }\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n      return typeof obj;\n    } : function (obj) {\n      return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    }, _typeof(obj);\n  }\n\n  function _toPrimitive(input, hint) {\n    if (_typeof(input) !== \"object\" || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || \"default\");\n      if (_typeof(res) !== \"object\") return res;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (hint === \"string\" ? String : Number)(input);\n  }\n\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, \"string\");\n    return _typeof(key) === \"symbol\" ? key : String(key);\n  }\n\n  function _defineProperty(obj, key, value) {\n    key = _toPropertyKey(key);\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n    if (null != _i) {\n      var _s,\n        _e,\n        _x,\n        _r,\n        _arr = [],\n        _n = !0,\n        _d = !1;\n      try {\n        if (_x = (_i = _i.call(arr)).next, 0 === i) {\n          if (Object(_i) !== _i) return;\n          _n = !1;\n        } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n      } catch (err) {\n        _d = !0, _e = err;\n      } finally {\n        try {\n          if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n        } finally {\n          if (_d) throw _e;\n        }\n      }\n      return _arr;\n    }\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray$2(arr, i) || _nonIterableRest();\n  }\n\n  function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n  function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n  function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n  \n\n  var filterTagName = ['code', 'table', 'thead', 'tbody', 'td', 'blockquote'];\n  function rgbaToHsb(rgba) {\n    var rgbaValues = rgba.slice(rgba.indexOf('(') + 1, rgba.indexOf(')')).split(',');\n    var red = parseInt(rgbaValues[0].trim(), 10);\n    var green = parseInt(rgbaValues[1].trim(), 10);\n    var blue = parseInt(rgbaValues[2].trim(), 10);\n    var alpha = 1;\n    if (rgbaValues[3]) {\n      alpha = parseFloat(rgbaValues[3].trim());\n    }\n    var r = red / 255;\n    var g = green / 255;\n    var b = blue / 255;\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var delta = max - min;\n    var h = 0;\n    var s = 0;\n    var v = max;\n    if (delta !== 0) {\n      if (max === r) {\n        h = (g - b) / delta % 6;\n      } else if (max === g) {\n        h = (b - r) / delta + 2;\n      } else {\n        h = (r - g) / delta + 4;\n      }\n    }\n    h = Math.round(h * 60);\n    if (h < 0) {\n      h += 360;\n    }\n    if (max !== 0) {\n      s = delta / max;\n    }\n    return [h, Math.round(s * 100), Math.round(v * 100), alpha];\n  }\n  function isHsbInRange(hsb, hMin, hMax, sMin, sMax, bMin, bMax) {\n    var _hsb = _slicedToArray(hsb, 3),\n      h = _hsb[0],\n      s = _hsb[1],\n      b = _hsb[2];\n    return h >= hMin && h <= hMax && s >= sMin && s <= sMax && b >= bMin && b <= bMax;\n  }\n  var checkTextColor = function checkTextColor(node) {\n    var _window$getComputedSt = window.getComputedStyle(node),\n      backgroundColor = _window$getComputedSt.backgroundColor,\n      color = _window$getComputedSt.color;\n    if (!backgroundColor || !color) return false;\n    var hbsBackgroundColor = rgbaToHsb(backgroundColor);\n    var hbsTextColor = rgbaToHsb(color);\n    if (isHsbInRange(hbsTextColor, 210, 230, 40, 60, 40, 60) && hbsTextColor[3] > 0.2) {\n      return true;\n    }\n    if ((isHsbInRange(hbsBackgroundColor, 0, 360, 0, 20, 15, 85) || isHsbInRange(hbsBackgroundColor, 0, 360, 20, 100, 15, 100)) && hbsBackgroundColor[3] > 0.2) {\n      return true;\n    }\n    return false;\n  };\n  var textToSpanFn = function textToSpanFn(text, startIdx, endIdx) {\n    if (!text) {\n      text = '';\n    }\n    var span = document.createElement('span');\n    if (startIdx <= endIdx) {\n      var spanText = getSubstringByIndices(text, startIdx, endIdx);\n      span.textContent = spanText;\n    }\n    return span;\n  };\n  var splitTextToSpan = function splitTextToSpan(node, textNode, startIdx, endIdx) {\n    if (!node || !textNode || startIdx > endIdx) return;\n    var text = textNode.textContent;\n    var textLen = calAccurateTextLen(text);\n    if (startIdx > 0) {\n      node.insertBefore(textToSpanFn(text, 0, startIdx - 1), textNode);\n    }\n    if (endIdx < textLen - 1) {\n      node.appendChild(textToSpanFn(text, endIdx + 1, textLen - 1));\n    }\n    var span = textToSpanFn(text, startIdx, endIdx);\n    node.replaceChild(span, textNode);\n    return span;\n  };\n\n  \n  var calAccurateTextLen = function calAccurateTextLen(str) {\n    var count = 0;\n    var _iterator = _createForOfIteratorHelper(str),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _char = _step.value;\n        count++;\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return count;\n  };\n\n  \n  \n  function highlightElement(_ref, filterFn) {\n    var elem = _ref.elem,\n      startIdx = _ref.startIdx,\n      endIdx = _ref.endIdx;\n    var selectedNodes = [];\n\n    \n    var splitAndHighlight = function splitAndHighlight(node) {\n      var childNodesLen = node.childNodes.length;\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        if (filterFn && filterFn(node, startIdx, endIdx)) {\n          return;\n        }\n      }\n      for (var i = 0; i < childNodesLen; i++) {\n        if (startIdx > endIdx) break;\n        var childNode = node.childNodes[i];\n        if (!childNode) break;\n        if (childNode.nodeType === Node.ELEMENT_NODE) {\n          if (filterFn && filterFn(childNode, startIdx, endIdx)) {\n            var textLen = calAccurateTextLen(childNode.innerText);\n            if (startIdx <= textLen) {\n              startIdx = 0;\n              endIdx = -1;\n              break;\n            } else {\n              endIdx -= textLen;\n              startIdx -= textLen;\n              continue;\n            }\n          }\n          splitAndHighlight(childNode);\n        }\n        if (childNode.nodeType === Node.TEXT_NODE) {\n          var childNodeText = childNode.textContent;\n          var _textLen = calAccurateTextLen(childNodeText);\n          var newNode = node;\n          if (childNodesLen > 1) {\n            newNode = textToSpanFn(childNodeText, 0, _textLen - 1);\n            node.replaceChild(newNode, childNode);\n            childNode = newNode.childNodes[0];\n          }\n          if (startIdx >= 0 && endIdx <= _textLen - 1) {\n            var match = splitTextToSpan(newNode, childNode, startIdx, endIdx);\n            match && selectedNodes.push(match);\n            startIdx = 0;\n            endIdx = -1;\n            break;\n          }\n          if (endIdx > _textLen - 1) {\n            var _match = splitTextToSpan(newNode, childNode, startIdx, _textLen - 1);\n            _match && selectedNodes.push(_match);\n            if (startIdx <= _textLen) {\n              endIdx -= _textLen;\n              startIdx = 0;\n            } else {\n              endIdx -= _textLen;\n              startIdx -= _textLen;\n            }\n          }\n        }\n      }\n    };\n    splitAndHighlight(elem);\n    return selectedNodes;\n  }\n\n  \n  function getSubstringByIndices(str, beginIdx, endIdx) {\n    var startIndex = 0;\n    var endIndex = str.length - 1;\n    var charCount = 0;\n    for (var i = 0; i < str.length; i++) {\n      if (charCount === beginIdx) {\n        startIndex = i;\n        break;\n      }\n      if (str.charCodeAt(i) >= 0xD800 && str.charCodeAt(i) <= 0xDBFF) {\n        i++;\n      }\n      charCount++;\n    }\n    charCount = 0;\n    for (var _i = startIndex; _i < str.length; _i++) {\n      if (charCount === endIdx - beginIdx + 1) {\n        endIndex = _i - 1;\n        break;\n      }\n      if (str.charCodeAt(_i) >= 0xD800 && str.charCodeAt(_i) <= 0xDBFF) {\n        _i++;\n      }\n      charCount++;\n    }\n    return str.slice(startIndex, endIndex + 1);\n  }\n\n  \n  var blockEleTagName = ['P', 'DIV', 'SECTION', 'LI', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'TABLE', 'WX-VIEW'];\n  var canNotSplitEleClassName = ['js_product_container', 'js_blockquote_wrap'];\n  var canNotSplitEleTagName = ['BLOCKQUOTE'];\n  function childNodesHasBlockEle(element, opts) {\n    if (!element || element.nodeType !== 1) {\n      return false;\n    }\n    for (var i = 0; i < element.children.length; i++) {\n      if (blockEleTagName.indexOf(element.children[i].tagName) !== -1 || opts.getSpan && element.children[i].tagName === 'SPAN' && childNodesHasBlockEle(element.children[i], opts)) {\n        return true;\n      }\n    }\n  }\n  function isNotSplitEle(ele, opts) {\n    for (var i = 0; i < canNotSplitEleClassName.length; i++) {\n      if (ele.className.indexOf(canNotSplitEleClassName[i]) > -1) {\n        return true;\n      }\n    }\n    if (opts.ignoreFlexChildren && ele.style.display === 'flex' || opts.ignoreNotWriteableChildren && (ele.getAttribute('contenteditable') === 'false' || ele.childNodes.length === 1 && ele.childNodes[0].getAttribute('contenteditable') === 'false')) {\n      return true;\n    }\n    return canNotSplitEleTagName.indexOf(ele.tagName) > -1;\n  }\n  function isElement(node) {\n    return node.nodeType === Node.ELEMENT_NODE;\n  }\n  function getParaListAllNodes(element, opts) {\n    var childNodes = Array.from(element.childNodes);\n    if (!childNodes.length) {\n      return [];\n    }\n    var child;\n    var paragraphList = [];\n    for (var i = 0; i < childNodes.length; i++) {\n      child = childNodes[i];\n      if (child.nodeType === Node.TEXT_NODE) {\n        paragraphList.push(child);\n        continue;\n      } else if (isElement(child)) {\n        child.isWrapper = undefined;\n        if (opts && opts.isMarkNode && opts.isMarkNode(child)) {\n          continue;\n        }\n        if (childNodesHasBlockEle(child, opts) && !isNotSplitEle(child, opts)) {\n          paragraphList = paragraphList.concat(getParaListAllNodes(child, opts));\n          if (opts.getNestedStructure) {\n            child.isWrapper = true;\n            paragraphList.push(child);\n          }\n        } else {\n          paragraphList.push(child);\n          if (opts.ignorePreloadNode && child.getAttribute('data-preloadingid') || child.classList.contains('wx_img_placeholder')) {\n            paragraphList.pop();\n          }\n        }\n      }\n    }\n    return paragraphList;\n  }\n\n  var initJsBridge = false;\n  if (!window.JSAPIEventCallbackMap) {\n    window.JSAPIEventCallbackMap = {};\n  }\n  function connectWebViewJavascriptBridge(callback) {\n    if (window.WebViewMPapp || window.WebViewJavascriptBridge) {\n      return callback(window.WebViewMPapp || window.WebViewJavascriptBridge);\n    }\n    if (window.WVJBCallbacks) {\n      return window.WVJBCallbacks.push(callback);\n    }\n    window.WVJBCallbacks = [callback];\n    if (!initJsBridge) {\n      initJsBridge = true;\n      var WVJBIframe = document.createElement('iframe');\n      WVJBIframe.style.display = 'none';\n      WVJBIframe.src = 'https://__bridge_loaded__';\n      document.body.appendChild(WVJBIframe);\n      setTimeout(function () {\n        initJsBridge = false;\n        document.body.removeChild(WVJBIframe);\n      }, 0);\n    }\n    return false;\n  }\n  function invoke$1(jsapiName, opt, callback) {\n    connectWebViewJavascriptBridge(function (bridge) {\n      try {\n        if (typeof opt === 'function') {\n          callback = opt;\n        }\n        if (_typeof(opt) !== 'object' && typeof opt !== 'string') {\n          opt = {};\n        }\n        bridge.callHandler(jsapiName, opt, function (res) {\n          try {\n            var ret = _typeof(res) === 'object' ? res : JSON.parse(res);\n            var errMsg = ret.err_msg || ret.errMsg;\n            console.info(\"[mpapp jsapi] invoke->\".concat(jsapiName, \" \").concat(opt.action || '', \" \").concat(errMsg));\n            typeof callback === 'function' && callback(ret);\n          } catch (e) {\n            window.WX_BJ_REPORT.BadJs.report('invoke', \"callback \".concat(jsapiName, \" error:\"), {\n              mid: 'mmbizwebapp:js_brridge',\n              _info: e\n            });\n            console.error(\"[mpapp jsapi] \".concat(jsapiName, \" \").concat(opt.action || ''), e, res);\n          }\n        });\n      } catch (e) {\n        window.WX_BJ_REPORT.BadJs.report('invoke', 'callback error:', {\n          mid: 'mmbizwebapp:js_brridge',\n          _info: e\n        });\n        console.error('[mpapp jsapi]', e);\n      }\n    });\n  }\n\n  var doc$1 = {};\n  var isAcrossOrigin$1 = false;\n  var __moon_report$1 = window.__moon_report || function () {};\n  var MOON_JSAPI_KEY_OFFSET = 8;\n  try {\n    doc$1 = top.window.document;\n  } catch (e) {\n    isAcrossOrigin$1 = true;\n  }\n  if (!window.JSAPIEventCallbackMap) {\n    window.JSAPIEventCallbackMap = {};\n  }\n  function ready(onBridgeReady) {\n    var bridgeReady = function bridgeReady() {\n      try {\n        if (onBridgeReady) {\n          window.onBridgeReadyTime = window.onBridgeReadyTime || Date.now();\n          onBridgeReady();\n        }\n      } catch (e) {\n        __moon_report$1([{\n          offset: MOON_JSAPI_KEY_OFFSET,\n          log: 'ready',\n          e: e\n        }]);\n        throw e;\n      }\n      window.jsapiReadyTime = Date.now();\n    };\n    if (!isAcrossOrigin$1 && (typeof top.window.WeixinJSBridge === 'undefined' || !top.window.WeixinJSBridge.invoke)) {\n      if (doc$1.addEventListener) {\n        doc$1.addEventListener('WeixinJSBridgeReady', bridgeReady, false);\n      } else if (doc$1.attachEvent) {\n        doc$1.attachEvent('WeixinJSBridgeReady', bridgeReady);\n        doc$1.attachEvent('onWeixinJSBridgeReady', bridgeReady);\n      }\n    } else {\n      bridgeReady();\n    }\n  }\n  function invoke(methodName, args, callback) {\n    if (window.__second_open_wait_a8key__ && window.__second_open_wait_a8key_task__) {\n      window.__second_open_wait_a8key_task__.push(function () {\n        invoke(methodName, args, callback);\n      });\n      return;\n    }\n    ready(function () {\n      if (isAcrossOrigin$1) return false;\n      if (_typeof(top.window.WeixinJSBridge) !== 'object') {\n        alert('请在微信中打开此链接');\n        return false;\n      }\n      top.window.WeixinJSBridge.invoke(methodName, args, function () {\n        try {\n          for (var _len = arguments.length, rets = new Array(_len), _key = 0; _key < _len; _key++) {\n            rets[_key] = arguments[_key];\n          }\n          var ret = rets[0];\n          var errMsg = ret && ret.err_msg ? \", err_msg-> \".concat(ret.err_msg) : '';\n          console.info('[system]', \"[jsapi] invoke->\".concat(methodName).concat(errMsg));\n          if (callback) {\n            callback.apply(window, rets);\n          }\n        } catch (e) {\n          __moon_report$1([{\n            offset: MOON_JSAPI_KEY_OFFSET,\n            log: \"invoke;methodName:\".concat(methodName),\n            e: e\n          }]);\n          throw e;\n        }\n      });\n    });\n  }\n  function call(methodName) {\n    if (window.__second_open_wait_a8key__ && window.__second_open_wait_a8key_task__) {\n      window.__second_open_wait_a8key_task__.push(function () {\n        call(methodName);\n      });\n      return;\n    }\n    ready(function () {\n      if (isAcrossOrigin$1) return false;\n      if (_typeof(top.window.WeixinJSBridge) !== 'object') {\n        return false;\n      }\n      try {\n        top.window.WeixinJSBridge.call(methodName);\n      } catch (e) {\n        __moon_report$1([{\n          offset: MOON_JSAPI_KEY_OFFSET,\n          log: \"call;methodName:\".concat(methodName),\n          e: e\n        }]);\n        throw e;\n      }\n    });\n  }\n  function on$1(eventName, callback) {\n    if (window.__second_open_wait_a8key__ && window.__second_open_wait_a8key_task__) {\n      window.__second_open_wait_a8key_task__.push(function () {\n        on$1(eventName, callback);\n      });\n      return;\n    }\n    ready(function () {\n      if (isAcrossOrigin$1) return false;\n      if (_typeof(top.window.WeixinJSBridge) !== 'object' || !top.window.WeixinJSBridge.on) {\n        return false;\n      }\n      if (!window.JSAPIEventCallbackMap[eventName]) {\n        window.JSAPIEventCallbackMap[eventName] = [];\n      }\n      window.JSAPIEventCallbackMap[eventName].push(callback);\n      if (window.JSAPIEventCallbackMap[eventName].length > 1) {\n        return false;\n      }\n      top.window.WeixinJSBridge.on(eventName, function () {\n        try {\n          for (var _len2 = arguments.length, rets = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            rets[_key2] = arguments[_key2];\n          }\n          var ret = rets[0];\n          var errMsg = ret && ret.err_msg ? \", err_msg-> \".concat(ret.err_msg) : '';\n          console.info('[system]', \"[jsapi] event->\".concat(eventName).concat(errMsg));\n          if (window.JSAPIEventCallbackMap[eventName] && window.JSAPIEventCallbackMap[eventName].length) {\n            var result;\n            for (var i = 0; i < window.JSAPIEventCallbackMap[eventName].length; i++) {\n              result = window.JSAPIEventCallbackMap[eventName][i].apply(window, rets);\n            }\n            return result;\n          }\n        } catch (e) {\n          __moon_report$1([{\n            offset: MOON_JSAPI_KEY_OFFSET,\n            log: \"on;eventName:\".concat(eventName),\n            e: e\n          }]);\n          throw e;\n        }\n      });\n    });\n  }\n  function remove(eventName, callback) {\n    if (window.__second_open_wait_a8key__ && window.__second_open_wait_a8key_task__) {\n      window.__second_open_wait_a8key_task__.push(function () {\n        remove(eventName, callback);\n      });\n      return;\n    }\n    ready(function () {\n      if (!window.JSAPIEventCallbackMap[eventName]) {\n        return false;\n      }\n      var result = false;\n      for (var i = window.JSAPIEventCallbackMap[eventName].length - 1; i >= 0; i--) {\n        if (window.JSAPIEventCallbackMap[eventName][i] === callback) {\n          window.JSAPIEventCallbackMap[eventName].splice(i, 1);\n          result = true;\n        }\n      }\n      return result;\n    });\n  }\n  var JSAPI = {\n    ready: ready,\n    invoke: invoke,\n    call: call,\n    on: on$1,\n    remove: remove\n  };\n\n  \n  \n  var reportLogs = [];\n  var reportExtraLogs = [];\n  var sendUrl = '/mp/jsmonitor?#wechat_redirect';\n  var monitor = {};\n  monitor._reportOptions = {\n    idkey: {}\n  };\n  function ObjWithoutProperty(source, exclude) {\n    if (source === null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    for (var i = 0; i < sourceKeys.length; i++) {\n      var key = sourceKeys[i];\n      if (exclude.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n    return target;\n  }\n  function formatDataToString(data) {\n    var reportData = [];\n    for (var key in data) {\n      if (Object.prototype.hasOwnProperty.call(data, key)) {\n        reportData.push(key + '=' + encodeURIComponent(data[key]));\n      }\n    }\n    return reportData.join('&');\n  }\n  monitor.getReportData = function (opt) {\n    opt = opt || {};\n    var idkey = monitor._reportOptions.idkey || {};\n    var key = null;\n    var reportData = {};\n    var nextKey;\n    try {\n      for (key in idkey) {\n        if (Object.prototype.hasOwnProperty.call(idkey, key) && idkey[key]) {\n          reportLogs.push(key + '_' + idkey[key]);\n        }\n      }\n    } catch (e) {\n      return false;\n    }\n    if (reportLogs.length === 0) {\n      return false;\n    }\n    if (reportExtraLogs.length) {\n      reportData.lc = reportExtraLogs.length;\n      reportExtraLogs.forEach(function (extraLog, index) {\n        reportData[\"log\".concat(index)] = extraLog;\n      });\n    }\n    try {\n      var reportOptions = monitor._reportOptions;\n      if (reportOptions !== null && reportOptions !== undefined) {\n        for (nextKey in reportOptions) {\n          if (Object.prototype.hasOwnProperty.call(reportOptions, nextKey)) {\n            reportData[nextKey] = reportOptions[nextKey];\n          }\n        }\n      }\n    } catch (e) {\n      reportData = {};\n    }\n    reportData.idkey = reportLogs.join(';');\n    reportData.t = Math.random();\n    if (opt.remove !== false) {\n      reportLogs = [];\n      reportExtraLogs = [];\n      monitor._reportOptions = {\n        idkey: {}\n      };\n    }\n    return reportData;\n  };\n  monitor.setLogs = function (opt) {\n    var id = opt.id;\n    var key = opt.key;\n    var value = opt.value;\n    var extraLog = opt.log;\n    var others = ObjWithoutProperty(opt, ['id', 'key', 'value', 'log']);\n    var idkey = monitor._reportOptions.idkey || {};\n    var param = id + '_' + key;\n    if (idkey[param]) {\n      idkey[param] += value;\n    } else {\n      idkey[param] = value;\n    }\n    monitor._reportOptions.idkey = idkey;\n    if (extraLog) {\n      reportExtraLogs.push(extraLog);\n    }\n    try {\n      if (others !== null && others !== undefined) {\n        for (var otherKey in others) {\n          if (Object.prototype.hasOwnProperty.call(others, otherKey)) {\n            monitor._reportOptions[otherKey] = others[otherKey];\n          }\n        }\n      }\n    } catch (e) {\n      console.log(e);\n    }\n    return monitor;\n  };\n  monitor.setAvg = function (id, key, value) {\n    var idkey = monitor._reportOptions.idkey || {};\n    var param1 = id + '_' + key;\n    var param2 = id + '_' + (key - 1);\n    if (idkey[param1]) {\n      idkey[param1] += value;\n    } else {\n      idkey[param1] = value;\n    }\n    if (idkey[param2]) {\n      idkey[param2] += 1;\n    } else {\n      idkey[param2] = 1;\n    }\n    monitor._reportOptions.idkey = idkey;\n    return monitor;\n  };\n  monitor.setSum = function (id, key) {\n    var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var idkey = monitor._reportOptions.idkey;\n    var param = id + '_' + key;\n    if (idkey[param]) {\n      idkey[param] += value;\n    } else {\n      idkey[param] = value;\n    }\n    monitor._reportOptions.idkey = idkey;\n    return monitor;\n  };\n  monitor.send = function (async, ajax, origin) {\n    if (async !== false) {\n      async = true;\n    }\n    var data = monitor.getReportData();\n    origin = origin || '';\n    if (!data) {\n      return;\n    }\n    if (!!ajax && ajax instanceof Function) {\n      ajax({\n        url: origin + sendUrl,\n        type: 'POST',\n        mayAbort: true,\n        data: data,\n        async: async,\n        timeout: 2000\n      });\n    } else {\n      new Image().src = origin + '/mp/jsmonitor?' + formatDataToString(data) + '#wechat_redirect';\n    }\n  };\n  if (typeof window !== 'undefined' && window.__monitor) {\n    monitor = window.__monitor;\n  } else {\n    typeof window !== 'undefined' && (window.__monitor = monitor);\n  }\n  var monitor$1 = monitor;\n\n  \n  var logList = [];\n  var log = function log(msg) {\n    logList.push(msg);\n  };\n  var printLog = function printLog() {\n    for (var i = 0, len = logList.length; i < len; ++i) {\n      console.log(\"[RespType]\".concat(logList[i]));\n    }\n  };\n  var isArray = function isArray(val) {\n    return Object.prototype.toString.call(val) === '[object Array]';\n  };\n  var getValueType = function getValueType(value) {\n    if (isArray(value)) {\n      return 'array';\n    }\n    return _typeof(value);\n  };\n  var parseRtDesc = function parseRtDesc(rtDesc, k) {\n    var type = 'mix';\n    var isRequired = false;\n    var key = k;\n    if (k) {\n      var requireKeyWord = '_R';\n      var pos = k.indexOf(requireKeyWord);\n      var len = k.length - requireKeyWord.length;\n      isRequired = pos !== -1 && pos === len;\n      key = isRequired ? k.substring(0, len) : k;\n    }\n    if (typeof rtDesc === 'string') {\n      type = rtDesc;\n    } else if (isArray(rtDesc)) {\n      type = 'array';\n    } else if (_typeof(rtDesc) === 'object') {\n      type = 'object';\n    }\n    return {\n      key: key,\n      type: type,\n      isRequired: isRequired\n    };\n  };\n  var checkForArrayRtDesc = function checkForArrayRtDesc(arr, rtDescs) {\n    if (!isArray(arr)) {\n      return false;\n    }\n    for (var i = 0, len = arr.length; i < len; ++i) {\n      var value = arr[i];\n      var rtDesc = void 0;\n      var j = 0;\n      var flag = rtDescs.length === 0;\n      while (rtDesc = rtDescs[j++]) {\n        if (checkForRtDesc(value, rtDesc)) {\n          flag = true;\n          break;\n        }\n      }\n      if (!flag) {\n        return false;\n      }\n    }\n    return true;\n  };\n  var checkForStringRtDesc = function checkForStringRtDesc(value, rtDesc) {\n    var valueType = getValueType(value);\n    var desc = parseRtDesc(rtDesc);\n    var ret = desc.type === valueType;\n    if (!ret) {\n      log(\"miss match type : \".concat(valueType, \" !== \").concat(desc.type));\n    }\n    return ret;\n  };\n  var checkForObjectRtDesc = function checkForObjectRtDesc(json, rtDesc) {\n    if (_typeof(json) !== 'object' || isArray(json)) {\n      log('must be object');\n      return false;\n    }\n    var rootJson = json;\n    var nowCheckValue = json;\n    for (var k in rtDesc) {\n      if (rtDesc.hasOwnProperty(k)) {\n        var nowCheckDesc = rtDesc[k];\n        var desc = parseRtDesc(nowCheckDesc, k);\n        var key = desc.key;\n        nowCheckValue = rootJson[key];\n        var valueType = getValueType(nowCheckValue);\n        if (desc.isRequired && nowCheckValue === undefined) {\n          log(\"is required @key=\".concat(key));\n          return false;\n        }\n        if (nowCheckValue !== undefined) {\n          if (valueType !== desc.type && desc.type !== 'mix') {\n            log(\"miss match type : \".concat(valueType, \" !== \").concat(desc.type, \" @key=\").concat(key));\n            return false;\n          }\n          if ((valueType === 'array' || valueType === 'object') && desc.type !== 'mix') {\n            if (!checkForRtDesc(nowCheckValue, nowCheckDesc)) {\n              return false;\n            }\n          }\n        }\n      }\n    }\n    return true;\n  };\n  var checkForRtDesc = function checkForRtDesc(json, rtDesc) {\n    if (isArray(rtDesc)) {\n      return checkForArrayRtDesc(json, rtDesc);\n    }\n    if (_typeof(rtDesc) === 'object') {\n      return checkForObjectRtDesc(json, rtDesc);\n    }\n    if (typeof rtDesc === 'string') {\n      return checkForStringRtDesc(json, rtDesc);\n    }\n    return false;\n  };\n  var _check = function check(json, rtDescs) {\n    if (typeof json === 'string') {\n      try {\n        json = eval(\"(\".concat(json, \")\"));\n      } catch (e) {\n        log('parse json error');\n        return false;\n      }\n    }\n    if (_typeof(json) !== 'object') {\n      log('must be object');\n      return false;\n    }\n    if (!isArray(rtDescs)) {\n      rtDescs = [rtDescs];\n    }\n    var rtDesc;\n    var i = 0;\n    while (rtDesc = rtDescs[i++]) {\n      if (checkForRtDesc(json, rtDesc)) {\n        return true;\n      }\n    }\n    return false;\n  };\n  var RespTypes = {\n    check: function check(json, rtDesc) {\n      logList = [];\n      try {\n        var ret = _check(json, rtDesc);\n        if (!ret) {\n          printLog();\n        }\n        return ret;\n      } catch (e) {\n        logList.push(\"[rtException]\".concat(e.toString()));\n        printLog();\n        return false;\n      }\n    },\n    getMsg: function getMsg() {\n      return logList.join(';');\n    }\n  };\n\n  function parseUrl(url) {\n    var len = url.length;\n    var ques_pos = url.indexOf('?');\n    var hash_pos = url.indexOf('#');\n    hash_pos = hash_pos == -1 ? len : hash_pos;\n    ques_pos = ques_pos == -1 ? hash_pos : ques_pos;\n    var host = url.substring(0, ques_pos);\n    var query_str = url.substring(ques_pos + 1, hash_pos);\n    var hash = url.substring(hash_pos + 1);\n    return {\n      host: host,\n      query_str: query_str,\n      hash: hash\n    };\n  }\n  function join(url, args, noEncode) {\n    var ret = parseUrl(url);\n    var query_str = ret.query_str;\n    var args_arr = [];\n    if (_typeof(args) === 'object') {\n      for (var key in args) {\n        if (args.hasOwnProperty(key)) {\n          args_arr.push(\"\".concat(key, \"=\").concat(noEncode ? args[key] : encodeURIComponent(args[key])));\n        }\n      }\n    } else {\n      args_arr.push(noEncode ? args : encodeURIComponent(args));\n    }\n    if (args_arr.length > 0) {\n      query_str += (query_str !== \"\" ? \"&\" : \"\") + args_arr.join(\"&\");\n    }\n    return ret.host + (query_str !== \"\" ? \"?\".concat(query_str) : \"\") + (ret.hash !== \"\" ? \"#\".concat(ret.hash) : \"\");\n  }\n  \n  function addParam(url, param, value, forceReplace) {\n    url = url || location.href;\n    var firstAndPos = url.indexOf(\"&\");\n    var len = url.length;\n    var reverseUrl = url.replace(/^[\\w\\d]+:[/\\\\]+/g, \"\").split(\"\").reverse();\n    if (!Array.prototype.indexOf) {\n      Array.prototype.indexOf = function (searchElement, fromIndex) {\n        var k;\n        if (this == null) {\n          throw new TypeError('\"this\" is null or not defined');\n        }\n        var O = Object(this);\n        var len = O.length >>> 0;\n        if (len === 0) {\n          return -1;\n        }\n        var n = fromIndex || 0;\n        if (Math.abs(n) === Infinity) {\n          n = 0;\n        }\n        if (n >= len) {\n          return -1;\n        }\n        k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n        while (k < len) {\n          if (k in O && O[k] === searchElement) {\n            return k;\n          }\n          k++;\n        }\n        return -1;\n      };\n    }\n    var lastSlashPos = len - 1 - reverseUrl.indexOf(\"/\");\n    if (firstAndPos !== -1 && url.indexOf(\"?\") == -1 && firstAndPos > lastSlashPos) {\n      url = url.replace(\"&\", \"?\");\n    }\n    var reg = new RegExp(\"([\\\\?&]\".concat(param, \"=)[^&#]*\"));\n    if (!url.match(reg)) {\n      var urlInfo = parseUrl(url);\n      var hash = urlInfo.hash ? '#' + urlInfo.hash : '';\n      url = url.replace(hash, '');\n      var _pos = url.indexOf(\"?\");\n      if (_pos == -1) {\n        return \"\".concat(url, \"?\").concat(param, \"=\").concat(value).concat(hash);\n      }\n      if (_pos == url.length - 1) {\n        return \"\".concat(url + param, \"=\").concat(value).concat(hash);\n      }\n      return \"\".concat(url, \"&\").concat(param, \"=\").concat(value).concat(hash);\n    }\n    if (forceReplace === true) {\n      return url.replace(reg, \"$1\".concat(value));\n    }\n    return url;\n  }\n  function addWxfrom(src, wxfrom) {\n    var offset = window.service_type === 1 ? 10000 : 0;\n    return addParam(src, 'wxfrom', offset + Number(wxfrom), true);\n  }\n  function removeParam(url, param) {\n    var _URL = new URL(url),\n      protocol = _URL.protocol,\n      host = _URL.host,\n      pathname = _URL.pathname,\n      search = _URL.search,\n      hash = _URL.hash;\n    var queryParams = new URLSearchParams(search);\n    queryParams[\"delete\"](param);\n    var newSearch = queryParams.toString();\n    var newUrl = new URL(\"\".concat(protocol, \"//\").concat(host).concat(pathname).concat(newSearch ? \"?\".concat(decodeURIComponent(newSearch)) : \"\").concat(hash));\n    return newUrl.toString();\n  }\n  function getQuery(name, url) {\n    var u = url || window.location.search;\n    var reg = new RegExp(\"(^|&)\".concat(name, \"=([^&]*)(&|$)\"));\n    var r = u.substring(u.indexOf('?') + 1).match(reg);\n    return r !== null ? r[2] : '';\n  }\n  function encodeBase64(value) {\n    try {\n      return window.btoa(value);\n    } catch (e) {\n      return '';\n    }\n  }\n  function decodeBase64(value) {\n    try {\n      return window.atob(value);\n    } catch (e) {\n      return '';\n    }\n  }\n  function joinUrl$1(url) {\n    var obj = {};\n    if (typeof window.uin !== 'undefined') {\n      obj.uin = window.uin;\n    }\n    if (typeof window.key !== 'undefined') {\n      obj.key = window.key;\n    }\n    if (typeof window.pass_ticket !== 'undefined') {\n      obj.pass_ticket = window.pass_ticket;\n    }\n    if (typeof window.wxtoken !== 'undefined') {\n      obj.wxtoken = window.wxtoken;\n    }\n    if (typeof window.devicetype !== 'undefined') {\n      obj.devicetype = window.devicetype;\n    }\n    if (typeof window.clientversion !== 'undefined') {\n      obj.clientversion = window.clientversion || Mmversion.getInner();\n    }\n    obj.version = obj.clientversion;\n    if (window.biz) {\n      obj.__biz = window.biz;\n    }\n    if (getQuery('enterid')) {\n      obj.enterid = getQuery('enterid');\n    }\n    if (typeof window.appmsg_token !== 'undefined') {\n      obj.appmsg_token = window.appmsg_token;\n    } else if (url.indexOf('advertisement_report') > -1) {\n      new Image().src = \"\".concat(location.protocol, \"//mp.weixin.qq.com/mp/jsmonitor?idkey=68064_13_1&r=\").concat(Math.random());\n    }\n    obj.x5 = navigator.userAgent.indexOf('TBS/') !== -1 ? '1' : '0';\n    obj.f = 'json';\n    return join(url, obj);\n  }\n  function getA8keyQuery(name, url) {\n    return new Promise(function (resolve) {\n      if (window.__second_open_wait_a8key__ && window.__second_open_wait_a8key_task__) {\n        window.__second_open_wait_a8key_task__.push(function () {\n          resolve(getQuery(name, url));\n        });\n      } else {\n        resolve(getQuery(name, url));\n      }\n    });\n  }\n  var Url = {\n    parseUrl: parseUrl,\n    join: join,\n    addParam: addParam,\n    addWxfrom: addWxfrom,\n    getQuery: getQuery,\n    getA8keyQuery: getA8keyQuery,\n    encodeBase64: encodeBase64,\n    decodeBase64: decodeBase64,\n    joinUrl: joinUrl$1,\n    removeParam: removeParam\n  };\n\n  \n  function _log(level, msg) {\n    if (level === 'log') {\n      level = 'info';\n      msg = \"[WechatFe]\".concat(msg);\n    } else {\n      var prefix = \"__wap__\".concat(window.__second_open__ ? ' (sec)' : '');\n      msg = \"\".concat(prefix, \" \").concat(msg, \" location:[\").concat(location.href, \"]\");\n    }\n    msg += new Error().stack;\n    if (Mmversion.isMpapp) {\n      invoke$1('WNNativeCallbackLog', msg);\n    } else if (Mmversion.isWechat) {\n      if (Mmversion.isAndroid) {\n        console.warn('[system]', \"[MicroMsg.JsApiLog][\".concat(level, \"] jslog : \").concat(msg));\n      } else if (Mmversion.isIOS) {\n        JSAPI.invoke('writeLog', {\n          level: level,\n          msg: msg\n        });\n      } else {\n        JSAPI.invoke('log', {\n          level: level,\n          msg: msg\n        });\n      }\n    }\n  }\n  var Log = {\n    info: function info() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _log('info', args.join(' '));\n    },\n    warn: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      _log('warn', args.join(' '));\n    },\n    error: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      _log('error', args.join(' '));\n    },\n    debug: function debug() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      _log('debug', args.join(' '));\n    },\n    log: function log() {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n      _log('info', args.join(' '));\n    }\n  };\n\n  var html = function html(_str, encode) {\n    if (!_str) return '';\n    var replace = ['&#96;', '`', '&#39;', '\\'', '&quot;', '\"', '&nbsp;', ' ', '&gt;', '>', '&lt;', '<', '&yen;', '¥', '&amp;', '&', '&#60;', '<', '&#62;', '>'];\n    \n    var replaceReverse = ['&', '&amp;', '¥', '&yen;', '<', '&lt;', '>', '&gt;', ' ', '&nbsp;', '\"', '&quot;', '\\'', '&#39;', '`', '&#96;'];\n    var str = _str;\n    var target;\n    if (encode) {\n      target = replaceReverse;\n    } else {\n      target = replace;\n    }\n    for (var i = 0; i < target.length; i += 2) {\n      str = str.replace(new RegExp(target[i], 'g'), target[i + 1]);\n    }\n    return str;\n  };\n  var htmlLite = function htmlLite(_str, encode) {\n    if (!_str) return '';\n    var replace = ['&#96;', '`', '&#39;', '\\'', '&quot;', '\"', '&gt;', '>', '&lt;', '<', '&amp;', '&'];\n    \n    var replaceReverse = ['&', '&amp;', '<', '&lt;', '>', '&gt;', '\"', '&quot;', '\\'', '&#39;', '`', '&#96;'];\n    var str = _str;\n    var target;\n    if (encode) {\n      target = replaceReverse;\n    } else {\n      target = replace;\n    }\n    for (var i = 0; i < target.length; i += 2) {\n      str = str.replace(new RegExp(target[i], 'g'), target[i + 1]);\n    }\n    return str;\n  };\n  var htmlEncode = function htmlEncode(str) {\n    return html(str, true);\n  };\n  var htmlDecode = function htmlDecode(str) {\n    return html(str, false);\n  };\n  var htmlEncodeLite = function htmlEncodeLite(str) {\n    return htmlLite(str, true);\n  };\n  var htmlDecodeLite = function htmlDecodeLite(str) {\n    return htmlLite(str, false);\n  };\n  String.prototype.html = function (encode) {\n    return html(this.toString(), encode);\n  };\n  String.prototype.htmlEncode = function () {\n    return htmlEncode(this.toString());\n  };\n  String.prototype.htmlDecode = function () {\n    return htmlDecode(this.toString());\n  };\n  String.prototype.htmlLite = function (encode) {\n    return htmlLite(this.toString(), encode);\n  };\n  String.prototype.htmlEncodeLite = function () {\n    return htmlEncodeLite(this.toString());\n  };\n  String.prototype.htmlDecodeLite = function () {\n    return htmlDecodeLite(this.toString());\n  };\n\n  \n  var _a;\n  var METHOD_ENUM = {\n    GET: 0,\n    POST: 1\n  };\n  var __moon_report = window.__moon_report || function () {};\n  var MOON_AJAX_SUCCESS_OFFSET = 3;\n  var MOON_AJAX_NETWORK_OFFSET = 4;\n  var MOON_AJAX_ERROR_OFFSET = 5;\n  var MOON_AJAX_TIMEOUT_OFFSET = 6;\n  var MOON_AJAX_COMPLETE_OFFSET = 7;\n  var LENGTH_LIMIT = 4096;\n  var doc;\n  var isAcrossOrigin = false;\n  try {\n    doc = (_a = window.top) === null || _a === void 0 ? void 0 : _a.window.document;\n  } catch (e) {\n    isAcrossOrigin = true;\n  }\n  function networkStartLog(item) {\n    var _a, _b, _c;\n    console.log('[system]', \"< [request \".concat(item.requestType, \"]\"), item.method, item);\n    if ((_a = window.vConsole) === null || _a === void 0 ? void 0 : _a.network) {\n      try {\n        return (_c = (_b = window.vConsole.network).add) === null || _c === void 0 ? void 0 : _c.call(_b, Object.assign({}, item, {\n          startTime: Date.now(),\n          endTime: Date.now(),\n          status: 0,\n          readyState: 2,\n          response: ''\n        }));\n      } catch (err) {}\n    }\n    return Object.assign({}, item, {\n      id: '__system_log__'\n    });\n  }\n  function networkEndLog(item) {\n    var _a, _b, _c;\n    console.log('[system]', \"> [response \".concat(item.requestType, \"]\"), item.response, item);\n    if (((_a = window.vConsole) === null || _a === void 0 ? void 0 : _a.network) && item.id !== '__system_log__') {\n      try {\n        return (_c = (_b = window.vConsole.network).update) === null || _c === void 0 ? void 0 : _c.call(_b, item.id, Object.assign({}, item, {\n          readyState: 4\n        }));\n      } catch (err) {}\n    }\n  }\n  function reqType(obj, path) {\n    return obj.url.indexOf(path) > -1 && obj.url.indexOf('action=') === -1 && (!obj.data || !obj.data.action);\n  }\n  function reportRtError(type, id, key, content) {\n    var log = '';\n    var prefix = type === 'rt' ? 'rtCheckError' : 'Ajax Length Limit';\n    if (content === null || content === void 0 ? void 0 : content.length) {\n      var loglen = 1000;\n      var len = content.length;\n      var lc = Math.ceil(len / loglen);\n      log = [\"&lc=\".concat(lc)];\n      for (var i = 0; i < lc; ++i) {\n        log.push(\"&log\".concat(i, \"=\") + \"[\".concat(prefix, \"][\").concat(i, \"]\").concat(encodeURIComponent(content.substring(i * loglen, i * loglen + loglen))));\n      }\n      log = log.join('');\n    }\n    var data = \"idkey=\".concat(id, \"_\").concat(key, \"_1\").concat(log, \"&r=\").concat(Math.random());\n    var xmlobj = new XMLHttpRequest();\n    xmlobj.open('POST', \"\".concat(location.protocol, \"//\").concat(location.host, \"/mp/jsmonitor?\"), true);\n    xmlobj.setRequestHeader('cache-control', 'no-cache');\n    xmlobj.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n    xmlobj.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    xmlobj.send(data);\n    if (type === 'ajaxLen') {\n      monitor$1.setLogs({\n        id: id,\n        key: key,\n        value: 1,\n        log: log\n      });\n    }\n  }\n  function reportRt(id, key, content) {\n    reportRtError('rt', id, key, content);\n  }\n  function reportAjaxLength(id, key, content) {\n    reportRtError('ajaxLen', id, key, content);\n  }\n  function setCurrentMpInfo(ifShow) {\n    var supportNewTopBar = Mmversion.isIOS && Mmversion.gtVersion('7.0.10', true) || Mmversion.isAndroid && Mmversion.gtVersion('7.0.12', true);\n    var supportLiveStatus = Mmversion.isIOS && Mmversion.gtVersion('8.0.46', true) || Mmversion.isAndroid && Mmversion.gtVersion('8.0.46', true);\n    JSAPI.invoke('currentMpInfo', {\n      userName: window.user_name,\n      brandName: !!supportNewTopBar && window.nickname === '' ? '未命名账号' : window.title,\n      title: window.msg_title || '',\n      brandIcon: window.hd_head_img.replace(/\\/0$/, '/132'),\n      itemShowType: window.item_show_type,\n      isPaySubscribe: window.isPaySubscribe,\n      topBarStyle: supportNewTopBar ? 1 : 0,\n      topBarShowed: ifShow,\n      disableShowFinderLiveTopBar: !ifShow && supportLiveStatus ? 1 : 0,\n      brandServiceType: window.service_type === undefined ? 0 : window.service_type + 1\n    }, function () {});\n  }\n  function findAjaxScopeByConfig(url, config) {\n    var pathname = new URL(url, location.href).pathname || '';\n    var scope = config[pathname.slice(1)];\n    if (scope) {\n      Log.log('ajax transfer config: ', JSON.stringify(config));\n      return scope;\n    }\n  }\n  function getAjaxScope(ajaxUrl) {\n    if (Url.getQuery('no_transfer', location.href) !== '1' && Mmversion.isWechat && !Mmversion.isInMiniProgram && !Mmversion.isWxWork && !Mmversion.isMpapp && !isAcrossOrigin && window.__ajaxTransferConfig && _typeof(window.__ajaxTransferConfig) === 'object' && (\n    Mmversion.isIOS && Mmversion.getInner() >= '1800282f' || Mmversion.isAndroid && Mmversion.getInner() >= '28002234' || Mmversion.isWindowsWechat && Mmversion.cpVersion('3.9.5', 1, true, 'windows') || Mmversion.isMacWechat && Mmversion.cpVersion('3.8.4', 1, true, 'mac'))) {\n      try {\n        return findAjaxScopeByConfig(ajaxUrl, window.__ajaxTransferConfig);\n      } catch (err) {\n        \n      }\n    }\n  }\n  function setXhrHeader(xhr, type, opt) {\n    if (opt.contentType) {\n      xhr.setRequestHeader('Content-Type', opt.contentType);\n    } else if (type === 'POST') {\n      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n    }\n    if (!opt.noXRequestedWidthHeader) {\n      xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    }\n  }\n  function Ajax(obj) {\n    if (obj.usePb) {\n      obj.type = 'POST';\n      obj.data = {\n        data: JSON.stringify(obj.data)\n      };\n    }\n    var ajaxScope = getAjaxScope(obj.url);\n    var type = (obj.type || 'GET').toUpperCase();\n    var timer;\n    var url;\n    if (obj.notJoinUrl) {\n      url = obj.url;\n    } else {\n      url = Url.joinUrl(obj.url);\n    }\n    if (obj.f === 'html') {\n      url = url.replace('&f=json', '');\n    }\n    var data = null;\n    if (_typeof(obj.data) === 'object') {\n      var d = obj.data;\n      var ds = [];\n      for (var k in d) {\n        if (d.hasOwnProperty(k)) {\n          ds.push(\"\".concat(k, \"=\").concat(encodeURIComponent(d[k])));\n        }\n      }\n      data = ds.join('&');\n    } else {\n      data = typeof obj.data === 'string' ? obj.data : null;\n    }\n    var beginTs;\n    var beforeReq = function beforeReq() {\n      if (reqType(obj, '/mp/getappmsgext')) {\n        window.startGetAppmsgExtTime = Date.now();\n        Log.log('start get appmsgext, url: ', obj.url);\n      }\n      if (reqType(obj, '/mp/getappmsgad')) {\n        window.startGetAppmsgAdTime = Date.now();\n        Log.log('start get appmsgad, url: ', obj.url);\n      }\n      beginTs = Date.now();\n    };\n    var beforeResp = function beforeResp(xhr) {\n      if (reqType(obj, '/mp/getappmsgext')) {\n        window.receiveGetAppmsgExt = \"\".concat(xhr.status, \"|\").concat(Date.now());\n        Log.log(\"receive appmsgext response, status: \".concat(xhr.status));\n      }\n      if (reqType(obj, '/mp/getappmsgad')) {\n        window.receiveGetAppmsgAd = \"\".concat(xhr.status, \"|\").concat(Date.now());\n        Log.log(\"receive appmsgad response, status: \".concat(xhr.status));\n      }\n      if (Math.random() < 0.01 && window.WX_BJ_REPORT && window.WX_BJ_REPORT.BadJs) {\n        try {\n          var key = ajaxScope ? 'transfer' : 'xhr';\n          var interval = 250;\n          var time = Date.now() - beginTs;\n          var range = Math.floor(time / interval) * interval;\n          var pathname = new URL(obj.url, location.href).pathname || '';\n          window.WX_BJ_REPORT.BadJs.report(\"\".concat(key, \"_perf:\").concat(pathname), JSON.stringify({\n            status: xhr.status,\n            time: \"[\".concat(range, \"-\").concat(range + interval, \")\")\n          }), {\n            mid: 'mmbizwap:ajaxtransfer',\n            view: 'wap_business'\n          });\n        } catch (err) {}\n      }\n    };\n    var handleRespSucc = function handleRespSucc(xhr) {\n      var _a;\n      try {\n        var responseText = xhr.responseText;\n        var resp = responseText;\n        if (obj.dataType === 'json') {\n          try {\n            if (JSON && JSON.parse) {\n              resp = JSON.parse(resp);\n            } else {\n              resp = eval(\"(\".concat(resp, \")\"));\n              monitor$1.setSum(523105, 127, 1).send();\n            }\n            var rtId = obj.rtId;\n            var rtKey = obj.rtKey || 0;\n            var rtDesc = obj.rtDesc;\n            if (rtId && rtDesc && RespTypes && !RespTypes.check(resp, rtDesc)) {\n              reportRt(+rtId, +rtKey, \"\".concat(RespTypes.getMsg(), \"[detail]\").concat(responseText, \";\").concat(obj.url));\n            }\n            if (resp && resp.base_resp && ((_a = resp.base_resp) === null || _a === void 0 ? void 0 : _a.ret) !== 0 && typeof window.WX_BJ_REPORT !== 'undefined' && window.WX_BJ_REPORT.BadJs && Math.random() < 0.001) {\n              var reportUrl = url;\n              if (url.indexOf('?') !== -1) {\n                reportUrl = url.substring(0, url.indexOf('?'));\n                if (Url.getQuery('action', url)) {\n                  reportUrl = \"\".concat(reportUrl, \"?action=\").concat(Url.getQuery('action', url));\n                }\n              }\n              if (!((reportUrl === '/mp/getappmsgext' || reportUrl === '/mp/getappmsgad') && typeof resp.base_resp.ret === 'undefined')) {\n                window.WX_BJ_REPORT.BadJs.report(reportUrl, \"ret=\".concat(resp.base_resp.ret), {\n                  mid: window.PAGE_MID,\n                  view: 'wap_retcode'\n                });\n              }\n            }\n          } catch (e) {\n            obj.error && obj.error(xhr, {\n              type: 1,\n              error: e,\n              status: xhr.status\n            });\n            return;\n          }\n        }\n        obj.success && obj.success(resp);\n      } catch (e) {\n        __moon_report({\n          offset: MOON_AJAX_SUCCESS_OFFSET,\n          e: e\n        });\n        throw e;\n      }\n    };\n    var handleRespErr = function handleRespErr(xhr, error) {\n      try {\n        obj.error && obj.error(xhr, {\n          type: 2,\n          error: error,\n          status: xhr.status\n        });\n      } catch (e) {\n        __moon_report({\n          offset: MOON_AJAX_ERROR_OFFSET,\n          e: e\n        });\n        throw e;\n      }\n    };\n    var handleRespComplete = function handleRespComplete() {\n      clearTimeout(timer);\n      try {\n        obj.complete && obj.complete();\n      } catch (e) {\n        __moon_report({\n          offset: MOON_AJAX_COMPLETE_OFFSET,\n          e: e\n        });\n        throw e;\n      }\n      obj.complete = null;\n    };\n    var handleReqTimeout = function handleReqTimeout(xhr) {\n      if (typeof obj.timeout !== 'undefined') {\n        timer = setTimeout(function () {\n          xhr.abort();\n          try {\n            obj.complete && obj.complete();\n          } catch (e) {\n            __moon_report({\n              offset: MOON_AJAX_COMPLETE_OFFSET,\n              e: e\n            });\n            throw e;\n          }\n          obj.complete = null;\n          __moon_report({\n            offset: MOON_AJAX_TIMEOUT_OFFSET,\n            log: \"ajax_timeout_error: \".concat(url),\n            e: ''\n          });\n        }, obj.timeout);\n      }\n    };\n    var retryXhrFn = function retryXhrFn(res, isTimeout, reqLogItem) {\n      var retryXhr = new XMLHttpRequest();\n      try {\n        retryXhr._noVConsole = true;\n      } catch (err) {}\n      retryXhr.open(type, url);\n      retryXhr.onreadystatechange = function () {\n        if (isTimeout) return;\n        if (retryXhr.readyState === 3) {\n          obj.received && obj.received(retryXhr);\n        }\n        if (retryXhr.readyState === 4) {\n          beforeResp(retryXhr);\n          var retryStatus = retryXhr.status;\n          if (retryStatus >= 200 && retryStatus < 400) {\n            handleRespSucc(retryXhr);\n          } else {\n            handleRespErr(retryXhr, res);\n            window.WX_BJ_REPORT && window.WX_BJ_REPORT.BadJs && window.WX_BJ_REPORT.BadJs.report('req_failure', JSON.stringify({\n              retryXhrStatus: retryStatus,\n              transferRes: res\n            }), {\n              mid: 'mmbizwap:ajaxtransfer',\n              view: 'wap_business'\n            });\n          }\n          reqLogItem.status = retryStatus;\n          reqLogItem.endTime = Date.now();\n          reqLogItem.response = retryXhr.responseText;\n          handleRespComplete();\n          networkEndLog(reqLogItem);\n        }\n      };\n      setXhrHeader(retryXhr, type, obj);\n      retryXhr.send(data);\n    };\n    if (ajaxScope && !obj.pureHttp) {\n      var header = {\n        'User-Agent': navigator.userAgent,\n        'Cookie': (window.__test_env__ ? 'uniproxy_route=1; ' : '') + document.cookie,\n        'Referer': location.href\n      };\n      if (obj.contentType) {\n        header['Content-Type'] = obj.contentType;\n      } else if (type === 'POST') {\n        header['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';\n      }\n      if (!obj.noXRequestedWidthHeader) {\n        header['X-Requested-With'] = 'XMLHttpRequest';\n      }\n      var reqUrl = new URL(url, location.href).href;\n      var method = METHOD_ENUM[type] || 0;\n      var params = Device.os.pc ? {\n        url: reqUrl,\n        req_json: data || '',\n        scope: ajaxScope,\n        webcgi_method: method,\n        webcgi_header: Object.keys(header).map(function (headerItemKey) {\n          return Device.os.Mac ? _defineProperty({}, headerItemKey, header[headerItemKey]) : {\n            key: headerItemKey,\n            value: header[headerItemKey]\n          };\n        }),\n        cgi_type: 1\n      } : {\n        reqUrl: reqUrl,\n        reqBody: data,\n        scope: ajaxScope,\n        method: method,\n        header: header\n      };\n      var reqLogItem = networkStartLog({\n        method: type,\n        url: url,\n        postData: obj.data || {},\n        requestHeader: header,\n        requestType: 'transfer'\n      });\n      var isTimeout = false;\n      handleReqTimeout({\n        abort: function abort() {\n          isTimeout = true;\n          reqLogItem.endTime = Date.now();\n          reqLogItem.response = 'timeout';\n          networkEndLog(reqLogItem);\n        }\n      });\n      Device.os.pc && monitor$1.setSum(115849, 69, 1);\n      JSAPI.invoke(Device.os.pc ? 'H5ExtTransfer' : 'webTransfer', params, function (res) {\n        var _a, _b, _c, _d, _e, _f;\n        if (isTimeout) return;\n        var status = 400;\n        var result = '';\n        if (Device.os.pc) {\n          try {\n            var retFlag = res.base_resp.ret === 0 && res.jsapi_resp.ret === 0 && res.err_msg.indexOf(':ok') > -1;\n            var respJsonFlag = res.jsapi_resp.resp_json;\n            status = retFlag && respJsonFlag ? 200 : 400;\n            result = res.jsapi_resp.resp_json;\n          } catch (err) {\n            console.error(err);\n          }\n        } else {\n          status = res && res.errCode * 1 === 0 && typeof res.result === 'string' && res.result ? 200 : 400;\n          result = res.result;\n        }\n        if (status >= 200 && status < 400) {\n          obj.received && obj.received(null);\n          beforeResp({\n            status: status\n          });\n          handleRespSucc({\n            status: status,\n            responseText: result\n          });\n          reqLogItem.status = status;\n          reqLogItem.endTime = Date.now();\n          reqLogItem.response = result;\n          handleRespComplete();\n          networkEndLog(reqLogItem);\n        } else if (window.__second_open__) {\n          JSAPI.invoke('request', {\n            url: reqUrl,\n            method: type,\n            data: data,\n            header: header\n          }, function (retryRes) {\n            if (isTimeout) return;\n            var retryStatus = retryRes.statusCode;\n            obj.received && obj.received(null);\n            beforeResp({\n              status: retryStatus\n            });\n            if (retryRes.err_msg.indexOf(':ok') > -1 && retryStatus >= 200 && retryStatus < 400) {\n              handleRespSucc({\n                status: retryStatus,\n                responseText: retryRes.data\n              });\n            } else {\n              retryXhrFn(res, isTimeout, reqLogItem);\n              handleRespErr({\n                status: retryStatus\n              }, res);\n              window.WX_BJ_REPORT && window.WX_BJ_REPORT.BadJs && window.WX_BJ_REPORT.BadJs.report('req_failure_sec_open', JSON.stringify({\n                retryReqJsapiRes: retryRes,\n                transferRes: res,\n                url: reqUrl\n              }), {\n                mid: 'mmbizwap:ajaxtransfer',\n                view: 'wap_business'\n              });\n            }\n            reqLogItem.status = retryStatus;\n            reqLogItem.endTime = Date.now();\n            reqLogItem.response = retryRes.data;\n            handleRespComplete();\n            networkEndLog(reqLogItem);\n          });\n        } else {\n          retryXhrFn(res, isTimeout, reqLogItem);\n        }\n        if (Device.os.pc) {\n          if (!res.err_msg.includes(':ok')) {\n            (_b = (_a = window.WX_BJ_REPORT) === null || _a === void 0 ? void 0 : _a.BadJs) === null || _b === void 0 ? void 0 : _b.report(\"pc transfer res no ok: \".concat(res.err_msg), params.url || '', {\n              mid: window.PAGE_MID,\n              _info: \"\".concat(JSON.stringify(params), \" || \").concat(JSON.stringify(res))\n            });\n          }\n          try {\n            if (res.jsapi_resp.resp_json && JSON.parse(res.jsapi_resp.resp_json).base_resp.ret !== 0 && JSON.parse(res.jsapi_resp.resp_json).base_resp.ret !== 190001 || res.base_resp.ret !== 0 || res.jsapi_resp.ret !== 0) {\n              (_d = (_c = window.WX_BJ_REPORT) === null || _c === void 0 ? void 0 : _c.BadJs) === null || _d === void 0 ? void 0 : _d.report(\"pc transfer res invalid ret\", params.url || '', {\n                mid: window.PAGE_MID,\n                _info: \"\".concat(JSON.stringify(params), \" || \").concat(JSON.stringify(res))\n              });\n            }\n          } catch (err) {}\n        } else {\n          try {\n            if (res.errCode !== 0) {\n              (_f = (_e = window.WX_BJ_REPORT) === null || _e === void 0 ? void 0 : _e.BadJs) === null || _f === void 0 ? void 0 : _f.report(\"mobile transfer res invalid ret\", params.url || '', {\n                mid: window.PAGE_MID,\n                _info: \"\".concat(JSON.stringify(params), \" || \").concat(JSON.stringify(res))\n              });\n            }\n          } catch (err) {}\n        }\n      });\n      beforeReq();\n      return;\n    }\n    var xhr = new XMLHttpRequest();\n    var mayAbort = !!obj.mayAbort;\n    var async = typeof obj.async === 'undefined' ? true : obj.async;\n    var _onreadystatechange = xhr.onreadystatechange;\n    xhr.open(type, url, async);\n    xhr.onreadystatechange = function () {\n      if (typeof _onreadystatechange === 'function') {\n        _onreadystatechange.apply(xhr);\n      }\n      if (xhr.readyState === 3) {\n        obj.received && obj.received(xhr);\n      }\n      if (xhr.readyState === 4) {\n        beforeResp(xhr);\n        xhr.onreadystatechange = null;\n        var status = xhr.status;\n        if (status >= 200 && status < 400) {\n          handleRespSucc(xhr);\n        } else {\n          handleRespErr(xhr, 'status error');\n          if (!!status || !mayAbort) {\n            var __ajaxtest = window.__ajaxtest || '0';\n            __moon_report({\n              offset: MOON_AJAX_NETWORK_OFFSET,\n              log: \"ajax_network_error[\".concat(status, \"][\").concat(__ajaxtest, \"]: \").concat(url, \";host:\").concat(location.host),\n              e: ''\n            });\n          }\n        }\n        handleRespComplete();\n      }\n    };\n    setXhrHeader(xhr, type, obj);\n    handleReqTimeout(xhr);\n    try {\n      xhr.send(data);\n      try {\n        if (url && url.length > LENGTH_LIMIT) {\n          reportAjaxLength(27613, 17, \"ajax get limit[length: \".concat(url.length, \"]\").concat(url.substring(0, 1024)));\n        }\n        if (data && data.length > LENGTH_LIMIT) {\n          reportAjaxLength(27613, 18, \"ajax post limit[length: \".concat(data.length, \"]\").concat(data.substring(0, 1024)));\n        }\n      } catch (e) {\n      }\n    } catch (e) {\n      obj.error && obj.error(xhr, {\n        type: 3,\n        error: e,\n        status: 0\n      });\n    }\n    beforeReq();\n    return xhr;\n  }\n  function AjaxWx(obj) {\n    obj.url += obj.url.indexOf('?') === -1 ? '?fasttmplajax=1' : '&fasttmplajax=1';\n    if (getAjaxScope(obj.url)) {\n      Ajax(obj);\n      return;\n    }\n    if (obj.usePb) {\n      obj.type = 'POST';\n      obj.data = {\n        data: JSON.stringify(obj.data)\n      };\n    }\n    if (!/^(http:\\/\\/|https:\\/\\/|\\/\\/)/.test(obj.url)) {\n      obj.url = \"https://mp.weixin.qq.com/\".concat(obj.url.replace(/^\\//, ''));\n    } else if (/^\\/\\//.test(obj.url)) {\n      obj.url = \"https:\".concat(obj.url);\n    }\n    if (obj.f !== 'html' && (obj.url.indexOf('?f=json') === -1 || obj.url.indexOf('&f=json') === -1)) {\n      obj.url += '&f=json';\n    }\n    if (!obj.notJoinUrl && obj.f !== 'html') {\n      obj.url = Url.joinUrl(obj.url);\n    }\n    var data = null;\n    if (_typeof(obj.data) === 'object') {\n      var d = obj.data;\n      var ds = [];\n      for (var k in d) {\n        if (d.hasOwnProperty(k)) {\n          ds.push(\"\".concat(k, \"=\").concat(encodeURIComponent(d[k])));\n        }\n      }\n      data = ds.join('&');\n    } else {\n      data = typeof obj.data === 'string' ? obj.data : null;\n    }\n    var header = {\n      Cookie: document.cookie,\n      referer: location.href\n    };\n    var reqLogItem = networkStartLog({\n      method: obj.type || 'GET',\n      url: obj.url,\n      postData: obj.data || {},\n      requestHeader: header,\n      requestType: 'jsapi'\n    });\n    var retryTime = 1;\n    var jsapiRequest = function jsapiRequest(obj, data) {\n      return JSAPI.invoke('request', {\n        url: obj.url,\n        method: obj.type,\n        data: data,\n        header: header\n      }, function (res) {\n        var _a;\n        if (res.err_msg.indexOf(':ok') > -1) {\n          if (reqType(obj, '/mp/getappmsgext')) {\n            window.receiveGetAppmsgExt = \"\".concat(res.statusCode, \"|\").concat(Date.now());\n          }\n          if (reqType(obj, '/mp/getappmsgad')) {\n            window.receiveGetAppmsgAd = \"\".concat(res.statusCode, \"|\").concat(Date.now());\n          }\n          if (retryTime === 1) {\n            obj.received && obj.received(null);\n          }\n          var resData = {};\n          if (res.data) {\n            try {\n              if (obj.dataType === 'json') {\n                resData = JSON.parse(res.data);\n              } else {\n                resData = res.data;\n              }\n              if (resData && resData.base_resp && ((_a = resData.base_resp) === null || _a === void 0 ? void 0 : _a.ret) !== 0 && typeof window.WX_BJ_REPORT !== 'undefined' && window.WX_BJ_REPORT.BadJs && Math.random() < 0.001) {\n                var reportUrl = obj.url;\n                if (obj.url.indexOf('?') !== -1) {\n                  reportUrl = obj.url.substring(0, obj.url.indexOf('?'));\n                  if (Url.getQuery('action', obj.url)) {\n                    reportUrl = \"\".concat(reportUrl, \"?action=\").concat(Url.getQuery('action', obj.url));\n                  }\n                }\n                if (!((reportUrl === '/mp/getappmsgext' || reportUrl === '/mp/getappmsgad') && typeof resData.base_resp.ret === 'undefined')) {\n                  window.WX_BJ_REPORT.BadJs.report(reportUrl, \"ret=\".concat(resData.base_resp.ret), {\n                    mid: window.PAGE_MID,\n                    view: 'wap_retcode'\n                  });\n                }\n              }\n            } catch (e) {\n              console.error(e);\n              obj.error && obj.error(null, {\n                type: 1,\n                error: e,\n                status: res.statusCode\n              });\n              obj.complete && obj.complete();\n              reqLogItem.endTime = Date.now();\n              reqLogItem.response = res;\n              networkEndLog(reqLogItem);\n              return;\n            }\n          }\n          var tmpResData = {};\n          try {\n            tmpResData = JSON.parse(res.data);\n          } catch (e) {}\n          if (tmpResData && tmpResData.base_resp && tmpResData.base_resp.ret === -3 && retryTime < 2 && (Mmversion.isIOS || Mmversion.isAndroid && Mmversion.getInner() > '27000600')) {\n            var _retryTime = retryTime++;\n            JSAPI.invoke('updatePageAuth', {}, function (res) {\n              console.log('[skeleton] updatePageAuth', res);\n              monitor$1.setSum(112287, 3, 1);\n              if (res && res.err_msg && res.err_msg.indexOf(':ok') > -1) {\n                window.top.pass_ticket = encodeURIComponent(Url.getQuery('pass_ticket', res.fullUrl).html(false).replace(/\\s/g, '+'));\n                if (obj.pass_ticket) {\n                  obj.pass_ticket = window.top.pass_ticket;\n                }\n                console.warn('[skeleton] updatePageAuth resetTopbar');\n                var supportNewTopBar = Mmversion.isIOS && Mmversion.gtVersion('7.0.10', true);\n                var showBottomBar = !!window.is_login;\n                if (window.top.item_show_type === '0' && supportNewTopBar) {\n                  var _top = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop || 0;\n                  setCurrentMpInfo(_top > 40 && !showBottomBar);\n                }\n                try {\n                  obj.url = Url.addParam(obj.url, 'retry', _retryTime, true);\n                } catch (err) {\n                  console.error(err);\n                }\n                jsapiRequest(obj, data);\n                monitor$1.setSum(112287, 4, 1);\n              } else {\n                obj.success && obj.success(resData);\n                obj.complete && obj.complete();\n                if (Mmversion.isIOS) {\n                  monitor$1.setSum(112287, 35, 1);\n                } else {\n                  monitor$1.setSum(112287, 36, 1);\n                }\n                reqLogItem.status = 200;\n                reqLogItem.endTime = Date.now();\n                reqLogItem.response = resData;\n                networkEndLog(reqLogItem);\n              }\n            });\n          } else {\n            obj.success && obj.success(resData);\n            obj.complete && obj.complete();\n            reqLogItem.status = 200;\n            reqLogItem.endTime = Date.now();\n            reqLogItem.response = resData;\n            networkEndLog(reqLogItem);\n          }\n        } else if (res.err_msg.indexOf('no permission') > -1 || !Mmversion.isOnlyWechat) {\n          Ajax(obj);\n          if (res.err_msg.indexOf('no permission') > -1) {\n            console.warn('[JSAPI Request] No permission');\n            monitor$1.setSum(112287, 31, 1);\n          }\n          reqLogItem.status = 302;\n          reqLogItem.endTime = Date.now();\n          reqLogItem.response = res;\n          networkEndLog(reqLogItem);\n        } else {\n          obj.error && obj.error(null, {\n            type: 3,\n            error: res,\n            status: 0\n          });\n          obj.complete && obj.complete();\n          monitor$1.setSum(112287, 32, 1);\n          var sample = 0.001;\n          if (Math.random() < sample) {\n            var msg = \"request: \".concat(JSON.stringify(obj.type), \" \").concat(JSON.stringify(obj.url), \" ;;;; cookie: \").concat(JSON.stringify(document.cookie), \" ;;;; data: \").concat(JSON.stringify(data), \" ;;;; resp: \").concat(JSON.stringify(res));\n            if (window.WX_BJ_REPORT && window.WX_BJ_REPORT.BadJs) {\n              window.WX_BJ_REPORT.BadJs.report('ajax_wx_request_error', msg, {\n                mid: 'mmbizwap:Monitor'\n              });\n            }\n          }\n          reqLogItem.status = 400;\n          reqLogItem.endTime = Date.now();\n          reqLogItem.response = res;\n          networkEndLog(reqLogItem);\n        }\n      });\n    };\n    if (reqType(obj, '/mp/getappmsgext')) {\n      window.startGetAppmsgExtTime = Date.now();\n    }\n    if (reqType(obj, '/mp/getappmsgad')) {\n      window.startGetAppmsgAdTime = Date.now();\n    }\n    return jsapiRequest(obj, data);\n  }\n  var ajax = function ajax(obj) {\n    if (window.__second_open_wait_a8key__ && window.__second_open_wait_a8key_task__) {\n      window.__second_open_wait_a8key_task__.push(function () {\n        ajax(obj);\n      });\n      return;\n    }\n    if (!Mmversion.isWxWork && (window.__second_open__ || !isAcrossOrigin && top.window.__second_open__) && window.__is_page_auth_return__ && !obj.pureHttp) {\n      return AjaxWx(obj);\n    }\n    return Ajax(obj);\n  };\n\n  \n  var timer = null;\n  var jsmonitorReport = {\n    setSum: function setSum(id, key, value) {\n      throw new Error('Function not implemented.');\n    },\n    setAvg: function setAvg(id, key, value) {\n      throw new Error('Function not implemented.');\n    },\n    setLogs: function setLogs(opt) {\n      throw new Error('Function not implemented.');\n    },\n    send: function send(async) {\n      throw new Error('Function not implemented.');\n    }\n  };\n  window.__monitor_unload_has_done__ = false;\n  jsmonitorReport.setSum = function (id, key, value) {\n    monitor$1.setSum(id, key, value);\n    return jsmonitorReport;\n  };\n  jsmonitorReport.setAvg = function (id, key, value) {\n    monitor$1.setAvg(id, key, value);\n    return jsmonitorReport;\n  };\n  jsmonitorReport.setLogs = function (opt) {\n    monitor$1.setLogs(opt);\n    return jsmonitorReport;\n  };\n  jsmonitorReport.send = function (async) {\n    if (async !== false) {\n      async = true;\n    }\n    monitor$1.send(async, ajax);\n    return jsmonitorReport;\n  };\n  function reportInterval(fn, delay) {\n    timer = window.setTimeout(function () {\n      fn();\n      reportInterval(fn, delay);\n    }, delay);\n  }\n  reportInterval(function () {\n    jsmonitorReport.send();\n  }, 1 * 1000);\n  window.addEventListener('unload', function () {\n    if (window.__monitor_report_has_done__) return;\n    window.__ajaxtest = '2';\n    if (timer) {\n      window.clearTimeout(timer);\n      timer = null;\n    }\n    jsmonitorReport.send(false);\n    window.__monitor_unload_has_done__ = true;\n  }, false);\n  if (window.__jsmonitorReport) {\n    jsmonitorReport = window.__jsmonitorReport;\n  } else {\n    window.__jsmonitorReport = jsmonitorReport;\n  }\n  var jsmonitorReport$1 = jsmonitorReport;\n\n  var isx5 = navigator.userAgent.indexOf('TBS/') !== -1;\n  var getDataFunc = [];\n  var reportData = [];\n  \n  var specificData = {};\n  function joinUrl(url) {\n    var obj = {};\n    if (typeof window.uin !== 'undefined') {\n      obj.uin = window.uin;\n    }\n    if (typeof window.key !== 'undefined') {\n      obj.key = window.key;\n    }\n    if (typeof window.pass_ticket !== 'undefined') {\n      obj.pass_ticket = window.pass_ticket;\n    }\n    if (typeof window.wxtoken !== 'undefined') {\n      obj.wxtoken = window.wxtoken;\n    }\n    if (typeof window.devicetype !== 'undefined') {\n      obj.devicetype = window.devicetype;\n    }\n    if (typeof window.clientversion !== 'undefined') {\n      obj.clientversion = window.clientversion;\n    }\n    if (typeof window.appmsg_token !== 'undefined') {\n      obj.appmsg_token = window.appmsg_token;\n    } else if (url.indexOf('advertisement_report') > -1) {\n      new Image().src = \"\".concat(location.protocol, \"//mp.weixin.qq.com/mp/jsmonitor?idkey=68064_13_1&r=\").concat(Math.random());\n    }\n    obj.x5 = isx5 ? '1' : '0';\n    obj.f = 'json';\n    return Url.join(url, obj);\n  }\n  function isObj(obj) {\n    return obj && _typeof(obj) === 'object';\n  }\n  function assign(target, source) {\n    if (isObj(target) && isObj(source)) {\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n  }\n  function assembleReportData(initiative) {\n    var leaveReportLog = [];\n    leaveReportLog.push({\n      content: \"[LeaveReport] specificData keys: \".concat(Object.keys(specificData)),\n      timestamp: Date.now()\n    });\n    Log.log(\"[LeaveReport] specificData keys: \".concat(Object.keys(specificData)));\n    console.log(\"[LeaveReport] specificData keys: \".concat(Object.keys(specificData)));\n    var allReportData = {};\n    for (var reportField in specificData) {\n      if (!allReportData[reportField]) {\n        allReportData[reportField] = {};\n      }\n      for (var i = 0; i < specificData[reportField].length; i++) {\n        var param = specificData[reportField][i];\n        if (typeof param === 'function') {\n          try {\n            assign(allReportData[reportField], param(initiative));\n          } catch (err) {\n            leaveReportLog.push({\n              content: \"[LeaveReport] specificData exec error: \".concat(param.toString().substring(0, 50)),\n              timestamp: Date.now()\n            });\n            Log.error(\"[LeaveReport] specificData exec error: \".concat(param.toString().substring(0, 50)));\n            console.error(\"[LeaveReport] specificData exec error: \".concat(param.toString().substring(0, 50)));\n          }\n        } else if (isObj(param)) {\n          assign(allReportData[reportField], param);\n        }\n      }\n    }\n    leaveReportLog.push({\n      content: \"[LeaveReport] reportData.length: \".concat(reportData.length),\n      timestamp: Date.now()\n    });\n    Log.log(\"[LeaveReport] reportData.length: \".concat(reportData.length));\n    console.log(\"[LeaveReport] reportData.length: \".concat(reportData.length));\n    leaveReportLog.push({\n      content: \"[LeaveReport] getDataFunc.length: \".concat(getDataFunc.length),\n      timestamp: Date.now()\n    });\n    Log.log(\"[LeaveReport] getDataFunc.length: \".concat(getDataFunc.length));\n    console.log(\"[LeaveReport] getDataFunc.length: \".concat(getDataFunc.length));\n    for (var _i = 0; _i < getDataFunc.length; _i++) {\n      try {\n        var data = getDataFunc[_i](initiative);\n        if (isObj(data)) {\n          reportData.push(data);\n        }\n      } catch (err) {\n        leaveReportLog.push({\n          content: \"[LeaveReport] getDataFunc exec error: \".concat(getDataFunc[_i].toString().substring(0, 50)),\n          timestamp: Date.now()\n        });\n        Log.error(\"[LeaveReport] getDataFunc exec error: \".concat(getDataFunc[_i].toString().substring(0, 50)));\n        console.error(\"[LeaveReport] getDataFunc exec error: \".concat(getDataFunc[_i].toString().substring(0, 50)));\n      }\n    }\n    for (var _i2 = 0; _i2 < reportData.length; _i2++) {\n      if (reportData[_i2].reportUrl) {\n        reportData[_i2].reportUrl = joinUrl(reportData[_i2].reportUrl);\n      }\n    }\n    allReportData.data = {\n      'requestList': reportData\n    };\n    leaveReportLog.push({\n      content: \"[LeaveReport] final reportData.length: \".concat(reportData.length, \", data=\").concat(JSON.stringify(reportData)),\n      timestamp: Date.now()\n    });\n    Log.log(\"[LeaveReport] final reportData.length: \".concat(reportData.length));\n    console.log(\"[LeaveReport] final reportData.length: \".concat(reportData.length));\n    allReportData.info = leaveReportLog;\n    return allReportData;\n  }\n  function addReport(param) {\n    if (typeof param === 'function') {\n      getDataFunc.push(param);\n    } else if (isObj(param)) {\n      reportData.push(param);\n    }\n  }\n  \n  function addSpecificReport(reportField, param) {\n    if (!specificData[reportField]) {\n      specificData[reportField] = [];\n    }\n    specificData[reportField].push(param);\n  }\n  \n  function reportNow(callback) {\n    var allReportData = assembleReportData(true);\n    JSAPI.invoke('handleMPPageAction', {\n      action: 'reportByLeaveForMPGateway',\n      reportData: allReportData\n    }, function (res) {\n      if (res && res.err_msg && res.err_msg.indexOf(':ok') !== -1) {\n        getDataFunc = [];\n        reportData = [];\n        specificData = {};\n        typeof callback === 'function' && callback(res);\n      } else {\n        getDataFunc = [];\n        reportData = [];\n        var len = allReportData.data.requestList.length;\n        allReportData.data.requestList.forEach(function (req) {\n          if (req.reportUrl) {\n            ajax({\n              type: req.method || 'GET',\n              url: req.reportUrl,\n              data: req.reportData,\n              async: false,\n              success: function success(resp) {\n                if (--len < 0) {\n                  typeof callback === 'function' && callback({\n                    err_msg: 'handleMPPageAction:ok',\n                    fallback: true,\n                    resp: resp\n                  });\n                }\n              },\n              error: function error(xhr, err) {\n                if (--len < 0) {\n                  typeof callback === 'function' && callback({\n                    err_msg: 'handleMPPageAction:fail',\n                    fallback: true,\n                    err: err\n                  });\n                }\n              }\n            });\n          }\n        });\n      }\n    });\n  }\n  var leaveReport = {\n    reportNow: reportNow,\n    addReport: addReport,\n    addSpecificReport: addSpecificReport\n  };\n  var _leaveReport = (function () {\n    var doc = {};\n    var isCrossOrigin = false;\n    try {\n      doc = top.window.document;\n    } catch (e) {\n      isCrossOrigin = true;\n    }\n    if (!isCrossOrigin && top.window.__leaveReport) {\n      return top.window.__leaveReport;\n    }\n    if (window.__leaveReport) {\n      return window.__leaveReport;\n    }\n    JSAPI.on('reportOnLeaveForMP', function () {\n      return assembleReportData(false);\n    });\n    return window.__leaveReport = leaveReport;\n  })();\n  var batchReportDataArr = [];\n  var getRepeatedReportJson = function getRepeatedReportJson() {\n    if (!batchReportDataArr || !batchReportDataArr.length) return false;\n    var reportData = {\n      count: 0\n    };\n    reportData.count = batchReportDataArr.length;\n    batchReportDataArr.forEach(function (data, index) {\n      reportData[\"reportjson\".concat(index)] = data;\n    });\n    batchReportDataArr = [];\n    console.log('[reportData]: ', reportData);\n    return reportData;\n  };\n  _leaveReport.addReport(function () {\n    var repeatedReportJson = getRepeatedReportJson();\n    if (!repeatedReportJson) return false;\n    var reportData = [];\n    for (var _i = 0, _Object$entries = Object.entries(repeatedReportJson); _i < _Object$entries.length; _i++) {\n      var _Object_i = _slicedToArray(_Object$entries[_i], 2),\n        key = _Object_i[0],\n        value = _Object_i[1];\n      reportData.push(\"\".concat(key, \"=\").concat(encodeURIComponent(value)));\n    }\n    return {\n      reportUrl: 'https://mp.weixin.qq.com/mp/wapcommreport?action=batch_report',\n      reportData: reportData.join('&'),\n      method: 'POST'\n    };\n  });\n\n  \n  var ua = navigator.userAgent;\n  var is_android = /(Android)/i.test(ua);\n  var g = {\n    x: 0,\n    y: 0,\n    isPc: /(WindowsNT)|(Windows NT)|(Macintosh)|Linux/i.test(navigator.userAgent) && !is_android,\n    isWp: /Windows\\sPhone/i.test(ua),\n    tsTime: -1\n  };\n  var prefixes = ['webkit', 'moz', 'ms', 'o'];\n  if (isUseTap()) {\n    on(document, \"touchstart\", function (e) {\n      if (e.touches.length === 1) {\n        var st = e.touches[0];\n        g.x = st.clientX;\n        g.y = st.clientY;\n        g.tsTime = +new Date();\n      } else {\n        g.tsTime = -1;\n      }\n    });\n  }\n  var scrolling;\n  function isScrolling() {\n    if (scrolling && new Date().getTime() - scrolling < 200) return true;\n    return false;\n  }\n  window.addEventListener('scroll', function () {\n    scrolling = new Date().getTime();\n  }, true);\n  function isUseTap() {\n    if (g.isPc || g.isWp) {\n      return false;\n    }\n    return true;\n  }\n  \n  function tap(el, cb, flag, className) {\n    if (!isUseTap()) {\n      on(el, \"click\", className, cb, flag);\n    } else {\n      cb.tap_handler = function (e) {\n        if (g.tsTime == -1 || +new Date() - g.tsTime > 200 || isScrolling()) {\n          return;\n        }\n        var st = e.changedTouches[0];\n        if (Math.abs(g.y - st.clientY) <= 5 && Math.abs(g.x - st.clientX) <= 5) {\n          return cb.call(this, e);\n          \n        }\n      };\n      on(el, \"touchend\", className, cb.tap_handler, flag);\n    }\n  }\n  \n  function longtap(el, cb, _flag, className, cancelCb) {\n    var self = this;\n    var timeOutEvent;\n    if (g.isPc || g.isWp) {\n      var mousedown = false;\n      var x;\n      var y;\n      var triggerLongClick;\n      on(el, 'mousedown', className, function (e) {\n        triggerLongClick = false;\n        mousedown = true;\n        x = e.clientX;\n        y = e.clientY;\n        timeOutEvent = setTimeout(function () {\n          triggerLongClick = true;\n          timeOutEvent = undefined;\n          cb.call(this, e);\n        }, 500);\n        e.preventDefault();\n      });\n      on(el, 'mousemove', className, function (e) {\n        if (!mousedown) return;\n        if (timeOutEvent && (Math.abs(y - e.clientY) > 5 || Math.abs(x - e.clientX) > 5)) {\n          clearTimeout(timeOutEvent);\n          timeOutEvent = undefined;\n          typeof cancelCb === 'function' && cancelCb.call(self, e);\n        }\n      });\n      on(el, 'mouseup', className, function () {\n        mousedown = false;\n        clearTimeout(timeOutEvent);\n      });\n      on(el, 'click', className, function () {\n        if (triggerLongClick) return false;\n      });\n    } else {\n      on(el, 'touchstart', className, function (e) {\n        e.touches.length === 1 && (timeOutEvent = setTimeout(function () {\n          timeOutEvent = undefined;\n          cb.call(self, e);\n        }, 500));\n      });\n      on(el, 'touchmove', className, function (e) {\n        if (!timeOutEvent) return;\n        var st = e.changedTouches[0];\n        if (Math.abs(g.y - st.clientY) > 5 || Math.abs(g.x - st.clientX) > 5) {\n          clearTimeout(timeOutEvent);\n          timeOutEvent = undefined;\n          typeof cancelCb === 'function' && cancelCb.call(self, e);\n        }\n      });\n      on(el, 'touchend', className, function (e) {\n        if (timeOutEvent) {\n          clearTimeout(timeOutEvent);\n          timeOutEvent = undefined;\n        } else {\n          e.preventDefault();\n        }\n      }, true);\n    }\n  }\n  function doubletap(el, cb) {\n    var _this = this;\n    var __lastTouchVideoTs = 0;\n    var realCb = function realCb(e) {\n      if (Date.now() - __lastTouchVideoTs < 300) {\n        cb.call(_this, e);\n      }\n      __lastTouchVideoTs = Date.now();\n    };\n    tap(el, realCb);\n    return function () {\n      return off(el, 'touchend', realCb);\n    };\n  }\n  function matches(ele, className) {\n    if (!ele || !className || ele.nodeType != ele.ELEMENT_NODE) return false;\n    var matchesSelector = ele.webkitMatchesSelector || ele.msMatchesSelector || ele.matchesSelector;\n    if (matchesSelector) return matchesSelector.call(ele, className);\n    className = className.substr(1);\n    return ele.className.indexOf(className) > -1;\n  }\n  function closest(target, className, context) {\n    while (target && !matches(target, className)) {\n      target = target !== context && target.nodeType !== target.DOCUMENT_NODE && target.parentNode;\n    }\n    return target;\n  }\n  function on(el, type, className, cb, flag, extra) {\n    var callback;\n    var handler;\n    var delegator;\n    if (type == \"input\" && g.isPc) {\n      type = \"keyup\";\n    }\n    if (!el) return;\n    if (typeof className === 'function') {\n      extra = flag;\n      flag = cb;\n      cb = className;\n      className = '';\n    }\n    if (typeof className !== 'string') {\n      className = '';\n    }\n    if (el == window && type == \"load\" && /complete|loaded/.test(document.readyState)) {\n      return cb({\n        type: \"load\"\n      });\n    }\n    if (type == 'tap') return tap(el, cb, flag, className);\n    if (type === 'longtap') return longtap(el, cb, flag, className, extra);\n    if (type == \"unload\" && \"onpagehide\" in window) {\n      type = \"pagehide\";\n    }\n    callback = function callback(e) {\n      var ret = cb(e);\n      if (ret === false) {\n        e.stopPropagation && e.stopPropagation();\n        e.preventDefault && e.preventDefault();\n      }\n      return ret;\n    };\n    if (className && className.charAt(0) == '.') delegator = function delegator(e) {\n      var target = e.target || e.srcElement;\n      var match = closest(target, className, el);\n      if (match) {\n        e.delegatedTarget = match;\n        return callback(e);\n      }\n    };\n    handler = delegator || callback;\n    cb[\"\".concat(type, \"_handler\")] = handler;\n    if (el.addEventListener) {\n      el.addEventListener(type, handler, !!flag);\n      return;\n    }\n    if (el.attachEvent) {\n      el.attachEvent(\"on\".concat(type), handler, !!flag);\n      return;\n    }\n  }\n  function off(el, type, cb, flag) {\n    if (!el) return;\n    var handlerType = type;\n    var handler;\n    if (handlerType == 'tap') {\n      if (isUseTap()) {\n        handlerType = 'touchend';\n        handler = cb.tap_handler && cb.tap_handler.touchend_handler ? cb.tap_handler.touchend_handler : cb;\n      } else {\n        handlerType = 'click';\n      }\n    }\n    if (!handler) {\n      handler = cb[\"\".concat(handlerType, \"_handler\")] || cb;\n    }\n    if (el.removeEventListener) {\n      el.removeEventListener(handlerType, handler, !!flag);\n      return;\n    }\n    if (el.detachEvent) {\n      el.detachEvent(\"on\".concat(handlerType), handler, !!flag);\n      return;\n    }\n    if (handlerType == 'tap' && isUseTap()) {\n      if (cb.tap_handler) {\n        cb.tap_handler.touchend_handler = null;\n      }\n      cb.tap_handler = null;\n    } else {\n      cb[\"\".concat(handlerType, \"_handler\")] = null;\n    }\n  }\n  function getHiddenProp() {\n    if ('hidden' in document) {\n      return 'hidden';\n    }\n    for (var i = 0; i < prefixes.length; i++) {\n      if (\"\".concat(prefixes[i], \"Hidden\") in document) {\n        return \"\".concat(prefixes[i], \"Hidden\");\n      }\n    }\n    return null;\n  }\n  function getVisibilityState() {\n    if ('visibilityState' in document) {\n      return 'visibilityState';\n    }\n    for (var i = 0; i < prefixes.length; i++) {\n      if (\"\".concat(prefixes[i], \"VisibilityState\") in document) {\n        return \"\".concat(prefixes[i], \"VisibilityState\");\n      }\n    }\n    return null;\n  }\n  function bindVisibilityChangeEvt(cb) {\n    var visProp = getHiddenProp();\n    if (visProp) {\n      var evtname = \"\".concat(visProp.replace(/[H|h]idden/, ''), \"visibilitychange\");\n      document.addEventListener(evtname, function () {\n        var isShow = document[getVisibilityState()] !== 'hidden';\n        typeof cb === 'function' && cb(isShow);\n      }, false);\n    }\n  }\n  var DomEvent = {\n    on: on,\n    off: off,\n    tap: tap,\n    longtap: longtap,\n    bindVisibilityChangeEvt: bindVisibilityChangeEvt,\n    doubletap: doubletap\n  };\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n\n  \n  var prefix = '__WXLS__';\n  var localStorage = window.localStorage || {\n    getItem: function getItem() {},\n    setItem: function setItem() {},\n    removeItem: function removeItem() {},\n    key: function key() {},\n    clear: function clear() {\n      var _a, _b;\n      (_b = (_a = window.localStorage) === null || _a === void 0 ? void 0 : _a.clear) === null || _b === void 0 ? void 0 : _b.call(_a);\n    },\n    length: 0\n  };\n  var evictionPolicies = {\n    noeviction: function noeviction(data) {\n      return data;\n    },\n    'allkeys-random': function allkeysRandom(data, size) {\n      var keys = Object.keys(data);\n      var memCnt = 0;\n      while (memCnt < size) {\n        var len = keys.length;\n        var randomKeyIdx = Math.floor(Math.random() * len);\n        var randomKey = keys[randomKeyIdx];\n        memCnt += JSON.stringify(data[randomKey]).length;\n        delete data[randomKey];\n        keys = Object.keys(data);\n      }\n      return data;\n    },\n    'volatile-ttl': function volatileTtl(data, size) {\n      var keys = Object.keys(data);\n      keys = keys.sort(function (key1, key2) {\n        var d1 = data[key1];\n        var d2 = data[key2];\n        if (d1.exp < d2.exp) return -1;\n        if (d1.exp > d2.exp) return 1;\n        return 0;\n      });\n      var memCnt = 0;\n      for (var i = 0; i < keys.length; i++) {\n        if (memCnt >= size) break;\n        var key = keys[i];\n        memCnt += JSON.stringify(data[key]).length;\n        delete data[key];\n      }\n      return data;\n    },\n    'clear-all': function clearAll() {\n      localStorage.clear();\n      return {};\n    }\n  };\n  function formatLogMsg(str) {\n    return \"[WXLS] \".concat(str);\n  }\n  \n  var LS = function () {\n    function LS(func, evictionPolicy, logger) {\n      _classCallCheck(this, LS);\n      this.logger = function () {};\n      if (!func) throw 'require function name.';\n      this.evictionPolicy = 'noeviction';\n      this.key = func;\n      if (typeof logger === 'function') {\n        this.logger = function (str, type) {\n          return logger(formatLogMsg(str), type);\n        };\n      }\n      if (evictionPolicy && Object.keys(evictionPolicies).indexOf(evictionPolicy) !== -1) {\n        this.evictionPolicy = evictionPolicy;\n      }\n      this.init();\n    }\n    _createClass(LS, [{\n      key: \"init\",\n      value: function init() {\n        var _a, _b;\n        this.check();\n        if (Math.random() * 1000 < 1) {\n          (_a = this.logger) === null || _a === void 0 ? void 0 : _a.call(this, \"LSlen: \".concat(((_b = window === null || window === void 0 ? void 0 : window.localStorage) === null || _b === void 0 ? void 0 : _b.length) || localStorage.length), 'report');\n        }\n      }\n    }, {\n      key: \"getData\",\n      value: function getData() {\n        var data = LS.getItem(this.key) || '{}';\n        try {\n          data = JSON.parse(data);\n        } catch (e) {\n          this.logger(\"getData error: \".concat(e), 'error');\n          localStorage.removeItem(prefix + this.key);\n          data = {};\n        }\n        return data;\n      }\n    }, {\n      key: \"check\",\n      value: function check(isReturn) {\n        var data = this.getData();\n        var temp = {};\n        var now = +new Date();\n        var key;\n        var val;\n        for (key in data) {\n          val = data[key];\n          if (+val.exp > now) {\n            temp[key] = val;\n          }\n        }\n        this.logger(\"check info: isReturn:\".concat(isReturn, \" data:\").concat(JSON.stringify(temp)), 'info');\n        if (isReturn) return temp;\n        LS.setItem(this.key, JSON.stringify(temp), this.logger);\n      }\n    }, {\n      key: \"set\",\n      value: function set(key, val, exp) {\n        var _a, _b;\n        var data = this.check(true);\n        data[key] = {\n          val: val,\n          exp: exp || +new Date()\n        };\n        try {\n          if (localStorage.getItem(prefix + this.key)) localStorage.removeItem(prefix + this.key);\n          localStorage.setItem(prefix + this.key, JSON.stringify(data));\n          this.logger(\"first set success: LSlen:\".concat((_a = window === null || window === void 0 ? void 0 : window.localStorage) === null || _a === void 0 ? void 0 : _a.length, \" key:\").concat(prefix + this.key, \" data:\").concat(JSON.stringify(data)), 'success');\n        } catch (e) {\n          this.logger(\"first set error: LSlen:\".concat((_b = window === null || window === void 0 ? void 0 : window.localStorage) === null || _b === void 0 ? void 0 : _b.length, \" error:\").concat(e, \" key:\").concat(prefix + this.key, \" data:\").concat(JSON.stringify(data), \" k:\").concat(key, \" v:\").concat(val, \" exp:\").concat(exp), 'error');\n          localStorage.clear();\n          LS.setItem(this.key, JSON.stringify(_defineProperty({}, key, {\n            val: val,\n            exp: exp || +new Date()\n          })), this.logger);\n        }\n      }\n    }, {\n      key: \"get\",\n      value: function get(key) {\n        var data = this.getData();\n        data = data[key];\n        return data ? data.val || null : null;\n      }\n    }, {\n      key: \"remove\",\n      value: function remove(key) {\n        var data = this.getData();\n        if (data[key]) delete data[key];\n        LS.setItem(this.key, JSON.stringify(data), this.logger);\n      }\n    }], [{\n      key: \"getItem\",\n      value: function getItem(key) {\n        key = prefix + key;\n        return localStorage.getItem(key);\n      }\n    }, {\n      key: \"setItem\",\n      value: function setItem(key, val, logger) {\n        var _a, _b;\n        key = prefix + key;\n        var n = 3;\n        while (n--) {\n          try {\n            if (localStorage.getItem(key)) localStorage.removeItem(key);\n            localStorage.setItem(key, val);\n            typeof logger === 'function' && logger(\"setItem success: LSlen:\".concat((_a = window === null || window === void 0 ? void 0 : window.localStorage) === null || _a === void 0 ? void 0 : _a.length, \" key:\").concat(key, \" val:\").concat(val), 'success');\n            break;\n          } catch (e) {\n            typeof logger === 'function' && logger(\"setItem error: LSlen:\".concat((_b = window === null || window === void 0 ? void 0 : window.localStorage) === null || _b === void 0 ? void 0 : _b.length, \" error:\").concat(e, \" key:\").concat(key, \" val:\").concat(val), 'error');\n            LS.clear();\n          }\n        }\n      }\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        var i;\n        var k;\n        for (i = localStorage.length - 1; i >= 0; i--) {\n          k = localStorage.key(i);\n          if (k.indexOf(prefix) == 0) {\n            localStorage.removeItem(k);\n          }\n        }\n      }\n    }, {\n      key: \"getSupportEvicationPolicy\",\n      value: function getSupportEvicationPolicy() {\n        return Object.keys(evictionPolicies);\n      }\n    }]);\n    return LS;\n  }();\n\n  \n  try {\n    if (typeof parent.window.hasListenMpPageAction === 'undefined') {\n      parent.window.hasListenMpPageAction = false;\n    }\n    if (typeof parent.window.hasListenStateChange === 'undefined') {\n      parent.window.hasListenStateChange = false;\n    }\n  } catch (error) {\n  }\n  var mpPageActionCb = [];\n  var stateChangeCb = [];\n  var HistoryLS = new LS('history4secondopen');\n  var HistoryKey = 'from';\n  var hasListenPopstateForSecOpenReload = false;\n  \n  var webComptStatus = {\n    status: 'loading'\n  };\n  var webComptInitCb = [];\n  var directionHandlerId = 0;\n  var directionChangeHandlersMap = {};\n  function isNativePage() {\n    return Url.getQuery('isNativePage') === '1' || Url.getQuery('isNativePage') === '2';\n  }\n  \n  function debounce(func) {\n    var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 50;\n    var timeout;\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      var context = this;\n      var later = function later() {\n        timeout = null;\n        func.apply(context, args);\n      };\n      if (timeout) {\n        return;\n      }\n      timeout = setTimeout(later, wait);\n    };\n  }\n  \n  function checkIntersect(rectA, rectB) {\n    return !(rectB.right < rectA.left || rectB.left > rectA.right || rectB.bottom < rectA.top || rectB.top > rectA.bottom);\n  }\n  var utils = {\n    isNativePage: isNativePage,\n    isNewNativePage: function isNewNativePage() {\n      return Url.getQuery('isNativePage') === '2';\n    },\n    isOldNativePage: function isOldNativePage() {\n      return Url.getQuery('isNativePage') === '1';\n    },\n    __useWcSlPlayer: false,\n    isWcSlPage: function isWcSlPage() {\n      return utils.__useWcSlPlayer;\n    },\n    getPlayerType: function getPlayerType() {\n      if (isNativePage()) {\n        return 2;\n      }\n      return 1;\n    },\n    getParam: function getParam(key) {\n      if (!key) return null;\n      var m = location.href.match(new RegExp(\"(\\\\?|&)\".concat(key, \"=([^&]+)\")));\n      return m ? m[2] : null;\n    },\n    \n    insertAfter: function insertAfter(newElement, targetElement) {\n      var parentElement = targetElement.parentNode;\n      if (parentElement.lastChild === targetElement) {\n        parentElement.appendChild(newElement);\n      } else {\n        parentElement.insertBefore(newElement, targetElement.nextSibling);\n      }\n    },\n    getInnerHeight: function getInnerHeight() {\n      var innerHeightFromApp = window.getInnerHeight && window.getInnerHeight();\n      return innerHeightFromApp || window.innerHeight || document.documentElement.clientHeight;\n    },\n    getInnerWidth: function getInnerWidth() {\n      return window.innerWidth || document.documentElement.clientWidth;\n    },\n    getScrollTop: function getScrollTop() {\n      return document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n    },\n    getDocumentHeight: function getDocumentHeight() {\n      return document.body.scrollHeight;\n    },\n    getElementActualTop: function getElementActualTop(element) {\n      var elRect = element.getBoundingClientRect();\n      var actualTop = elRect.top + this.getScrollTop();\n      return actualTop;\n    },\n    getElementTop: function getElementTop(element) {\n      return element.getBoundingClientRect().top;\n    },\n    getElementHeight: function getElementHeight(element) {\n      return element.getBoundingClientRect().height;\n    },\n    getOrientation: function getOrientation() {\n      var _a, _b;\n      return (_b = (_a = window.screen.orientation) === null || _a === void 0 ? void 0 : _a.angle) !== null && _b !== void 0 ? _b : window.orientation;\n    },\n    getDirection: function getDirection() {\n      var orientation = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : utils.getOrientation();\n      return (Mmversion.isIPad ? [90, 270] : [0, 180]).indexOf(orientation) > -1 ? 'vertical' : 'horizontal';\n    },\n    listenDirectionChange: function listenDirectionChange(cb) {\n      var _a, _b;\n      if ((_b = (_a = window.screen) === null || _a === void 0 ? void 0 : _a.orientation) === null || _b === void 0 ? void 0 : _b.addEventListener) {\n        directionChangeHandlersMap[directionHandlerId] = function (e) {\n          cb === null || cb === void 0 ? void 0 : cb(utils.getDirection(e.target.angle), e.target.angle);\n        };\n        window.screen.orientation.addEventListener('change', directionChangeHandlersMap[directionHandlerId]);\n      } else {\n        directionChangeHandlersMap[directionHandlerId] = function () {\n          var orientation = utils.getOrientation();\n          cb === null || cb === void 0 ? void 0 : cb(utils.getDirection(orientation), orientation);\n        };\n        window.addEventListener('orientationchange', directionChangeHandlersMap[directionHandlerId]);\n      }\n      return directionHandlerId++;\n    },\n    unlistenDirectionChange: function unlistenDirectionChange(handlerId) {\n      var _a, _b;\n      if ((_b = (_a = window.screen) === null || _a === void 0 ? void 0 : _a.orientation) === null || _b === void 0 ? void 0 : _b.removeEventListener) {\n        window.screen.orientation.removeEventListener('change', directionChangeHandlersMap[handlerId]);\n      } else {\n        window.removeEventListener('orientationchange', directionChangeHandlersMap[handlerId]);\n      }\n      delete directionChangeHandlersMap[handlerId];\n    },\n    isScrollEnd: function isScrollEnd(threshold) {\n      return this.getScrollTop() + this.getInnerHeight() + threshold >= this.getDocumentHeight();\n    },\n    \n    listenStateChange: function listenStateChange() {\n      var opt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      stateChangeCb.push(opt.cb);\n      try {\n        if (parent.window.hasListenStateChange) {\n          return;\n        }\n      } catch (error) {\n      }\n      JSAPI.on('activity:state_change', function (res) {\n        stateChangeCb.forEach(function (callback) {\n          callback(res);\n        });\n      });\n      try {\n        parent.window.hasListenStateChange = true;\n      } catch (error) {\n      }\n    },\n    \n    listenMpPageAction: function listenMpPageAction(cb) {\n      mpPageActionCb.push(cb);\n      try {\n        if (parent.window.hasListenMpPageAction) {\n          return;\n        }\n      } catch (error) {\n      }\n      JSAPI.on('onMPPageAction', function (res) {\n        mpPageActionCb.forEach(function (callback) {\n          callback(res);\n        });\n      });\n      try {\n        parent.window.hasListenMpPageAction = true;\n      } catch (error) {\n      }\n    },\n    getIosMainVersion: function getIosMainVersion() {\n      var versionInfo = navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);\n      return versionInfo && versionInfo[1] && parseInt(versionInfo[1].split('_')[0], 10);\n    },\n    \n    report120081: function report120081(key, times) {\n      jsmonitorReport$1.setSum(120081, key, times);\n      jsmonitorReport$1.send();\n    },\n    loadNewPageKeepingHistoryStackIfSecOpen: function loadNewPageKeepingHistoryStackIfSecOpen(url) {\n      if (window.__second_open__ && typeof url === 'string' && /^https?:\\/\\/mp.weixin.qq.com\\//.test(url)) {\n        HistoryLS.set(HistoryKey, location.href, Date.now() + 10000);\n      }\n      location.href = \"\".concat(url.replace(/#.*$/, ''), \"#wechat_redirect\");\n    },\n    initNewPageHistoryStackFromSecOpen: function initNewPageHistoryStackFromSecOpen() {\n      var fromUrl = HistoryLS.get(HistoryKey);\n      if (fromUrl && typeof fromUrl === 'string' && /^https?:\\/\\/mp.weixin.qq.com\\//.test(fromUrl)) {\n        HistoryLS.remove(HistoryKey);\n        if (history && history.replaceState && history.pushState) {\n          var curUrl = location.href;\n          try {\n            history.replaceState({\n              __mock_secopen_history_stack_reload__: 1\n            }, '', fromUrl);\n            history.pushState({\n              __mock_secopen_history_stack_reload__: 1\n            }, '', curUrl);\n          } catch (e) {\n            console.error('[initNewPageHistoryStackFromSecOpen]', e);\n          }\n        }\n      }\n      if (!hasListenPopstateForSecOpenReload) {\n        hasListenPopstateForSecOpenReload = true;\n        window.addEventListener('popstate', function (e) {\n          if (e.state && e.state.__mock_secopen_history_stack_reload__ === 1) {\n            location.reload();\n          }\n        });\n      }\n    },\n    initWebCompt: function initWebCompt(webComptList, callback) {\n      var flushCb = function flushCb() {\n        while (webComptInitCb.length) {\n          var cb = webComptInitCb.shift();\n          cb(webComptStatus);\n        }\n      };\n      if (Mmversion.isWechat && !Mmversion.isInMiniProgram && (Device.os.iphone && Device.os.getNumVersion() >= 10.3 && (Mmversion.gtVersion('7.0.14', 1) && Device.os.getNumVersion() < 15 || Mmversion.gtVersion('8.0.7')) || Device.os.android && Mmversion.gtVersion('7.0.15', 1) && Device.os.getNumVersion() >= 5)) {\n        document.addEventListener('WeixinOpenTagsReady', function () {\n          webComptStatus = {\n            status: 'ready'\n          };\n          flushCb();\n        });\n        document.addEventListener('WeixinOpenTagsError', function (e) {\n          webComptStatus = {\n            status: 'error',\n            error: e && e.detail && e.detail.errMsg\n          };\n          flushCb();\n        });\n        JSAPI.invoke('handleMPPageAction', {\n          action: 'wxConfig',\n          appid: 'wxmpfakeid',\n          webComptList: webComptList,\n          url: location.href\n        }, function (res) {\n          console.log('wx config web compt result', webComptList, res);\n          Log.info('wx config web compt result', webComptList, JSON.stringify(res));\n          if (res && res.err_msg && res.err_msg.indexOf(':ok') === -1) {\n            webComptStatus = {\n              status: 'error',\n              error: res.err_msg\n            };\n            flushCb();\n          }\n          if (typeof callback === 'function') {\n            callback(res);\n          }\n        });\n      } else {\n        var res = {\n          err_msg: 'handleMPPageAction:fail_webcompt unsupported'\n        };\n        console.log('wx config web compt result', webComptList, res);\n        Log.info('wx config web compt result', webComptList, JSON.stringify(res));\n        webComptStatus = {\n          status: 'error',\n          error: res.err_msg\n        };\n        flushCb();\n        if (typeof callback === 'function') {\n          callback(res);\n        }\n      }\n    },\n    initWebComptForWcSlVideoSharePage: function initWebComptForWcSlVideoSharePage() {\n      var initAfterConfWxOpen = function initAfterConfWxOpen(res) {\n        if (res.err_msg.indexOf(':ok') !== -1) {\n          utils.initNewPageHistoryStackFromSecOpen();\n        } else {\n          window.__failConfigWxOpen = true;\n          Log.info('failed to config wxopen: res not ok');\n          jsmonitorReport$1.setSum(221515, Device.os.iphone ? 7 : 8, 1);\n          window.WX_BJ_REPORT && window.WX_BJ_REPORT.BadJs && res && window.WX_BJ_REPORT.BadJs.report('WcSlPlayer:CfgError', (window.__second_open__ ? 'secopen:' : 'h5:') + JSON.stringify(res));\n        }\n      };\n      if (Mmversion.isAndroid) {\n        var clientVer = Mmversion.getInner();\n        if (clientVer > '27001037' && clientVer < '27001060' || clientVer >= '27001100') {\n          utils.initWebCompt(['wxOpen' ], initAfterConfWxOpen);\n        } else if (Mmversion.gtVersion('7.0.15', 1)) {\n          window.__failConfigWxOpen = true;\n          Log.info('failed to config wxopen: android version check failed (gt 7.0.15)');\n        } else {\n          window.__failConfigWxOpen = true;\n          Log.info('failed to config wxopen: android version check failed');\n        }\n      } else if (Mmversion.isIOS) {\n        if (Mmversion.gtVersion('7.0.15', 1)) {\n          utils.initWebCompt(['wxOpen' ], initAfterConfWxOpen);\n        } else {\n          window.__failConfigWxOpen = true;\n          Log.info('failed to config wxopen: ios version check failed');\n        }\n      } else {\n        window.__failConfigWxOpen = true;\n      }\n    },\n    \n    getWebComptStatus: function getWebComptStatus(cb) {\n      if (typeof cb !== 'function') {\n        return webComptStatus;\n      }\n      if (webComptStatus.status === 'loading') {\n        webComptInitCb.push(cb);\n      } else {\n        cb(webComptStatus);\n      }\n      return true;\n    },\n    \n    supportImmersiveMode: Mmversion.isWechat && !Mmversion.isInMiniProgram && (Mmversion.isIOS && Mmversion.gtVersion('8.0.9', 1) || Mmversion.isAndroid && Mmversion.gtVersion('8.0.9', 1)),\n    debounce: debounce,\n    \n    bindDebounceScrollEvent: function bindDebounceScrollEvent(fn) {\n      var scrollEle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n      var wait = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 50;\n      var useCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var debounceFn = debounce(fn, wait);\n      DomEvent.on(scrollEle, 'scroll', '', debounceFn, useCapture);\n    },\n    checkIntersect: checkIntersect,\n    \n    clickRange: function clickRange(evt) {\n      var selection = window.getSelection();\n      var range = selection.rangeCount && selection.getRangeAt(0);\n      if (!range || range.collapsed || !range.intersectsNode(evt.target)) {\n        return false;\n      }\n      var rangeClientRects = range.getClientRects();\n      var targetLineHeight = parseFloat(getComputedStyle(evt.target).lineHeight, 10);\n      var targetRect = evt.target.getBoundingClientRect();\n      for (var i in rangeClientRects) {\n        if (rangeClientRects.hasOwnProperty(i)) {\n          var rect = rangeClientRects[i];\n          var extraHeight = targetLineHeight ? (targetLineHeight - rect.height) / 2 : 0;\n          if (rect.width && checkIntersect(rect, targetRect) && evt.clientX >= rect.left && evt.clientX <= rect.right && evt.clientY >= rect.top - extraHeight && evt.clientY <= rect.bottom + extraHeight) {\n            return true;\n          }\n        }\n      }\n    },\n    once: function once(fn) {\n      return function () {\n        if (fn) {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n          var ret = fn.apply(this, args);\n          fn = null;\n          return ret;\n        }\n      };\n    }\n  };\n  var getOriginExpVal = function getOriginExpVal(key) {\n    return window.frontend_exp_list && window.frontend_exp_list.reduce(function (res, item) {\n      if (item.key === key) res = (item === null || item === void 0 ? void 0 : item.value) || '';\n      return res;\n    }, '');\n  };\n\n  Mmversion.isIOS && Mmversion.compareHexVersion('18003C31');\n  Mmversion.isIOS && Mmversion.getInner() >= '18003622' || Mmversion.isAndroid && Mmversion.getInner() >= '2800353c' || Device.os.unifiedPC && Mmversion.cpVersion('4.0.6', 1, true, 'unifiedpc') && getOriginExpVal('unified_share_card_style_pc') !== '0'\n;\n\n  var e = {\n      d: function d(t, r) {\n        for (var n in r) e.o(r, n) && !e.o(t, n) && Object.defineProperty(t, n, {\n          enumerable: !0,\n          get: r[n]\n        });\n      },\n      o: function o(e, t) {\n        return Object.prototype.hasOwnProperty.call(e, t);\n      }\n    },\n    t = {};\n  e.d(t, {\n    A: function A() {\n      return p;\n    },\n    Q: function Q() {\n      return s;\n    }\n  });\n  var _r = function r() {\n      return _r = Object.assign || function (e) {\n        for (var t, r = 1, n = arguments.length; r < n; r++) for (var o in t = arguments[r]) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);\n        return e;\n      }, _r.apply(this, arguments);\n    },\n    n = function n(e, t) {\n      var r = {};\n      for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);\n      if (null != e && \"function\" == typeof Object.getOwnPropertySymbols) {\n        var o = 0;\n        for (n = Object.getOwnPropertySymbols(e); o < n.length; o++) t.indexOf(n[o]) < 0 && Object.prototype.propertyIsEnumerable.call(e, n[o]) && (r[n[o]] = e[n[o]]);\n      }\n      return r;\n    },\n    o = function o(e, t, r) {\n      if (r || 2 === arguments.length) for (var n, o = 0, a = t.length; o < a; o++) !n && o in t || (n || (n = Array.prototype.slice.call(t, 0, o)), n[o] = t[o]);\n      return e.concat(n || Array.prototype.slice.call(t));\n    },\n    a = function a(e) {\n      if (\"object\" == _typeof(e) && e) return e;\n      if (\"string\" == typeof e) try {\n        return JSON.parse(e);\n      } catch (e) {\n        return;\n      }\n    },\n    i = function i(e) {\n      return 173 === e ? 95 : 166 === e ? 147 : [205, 207, 206].includes(e) ? 135 : 78;\n    };\n  function s(e) {\n    var t,\n      s,\n      p = e.thirdExtParam,\n      m = void 0 === p ? \"\" : p,\n      l = e.kvItems,\n      c = void 0 === l ? [] : l,\n      d = e.sessionKvItems,\n      u = void 0 === d ? [] : d,\n      x = e.scene,\n      y = void 0 === x ? -1 : x,\n      h = e.query,\n      g = e.parentType,\n      P = n(e, [\"thirdExtParam\", \"kvItems\", \"sessionKvItems\", \"scene\", \"query\", \"parentType\"]),\n      f = {\n        crossExtReqParams: [],\n        sessionExtReqParams: [],\n        originThirdExtParam: m\n      };\n    try {\n      if (console.warn(\"mpThirdExtParamToSearchExtParam init extReqParams:\", f), !m) throw new Error(\"mpThirdExtParamToSearchExtParam thirdExtParam 不存在\");\n      var v = JSON.parse(decodeURIComponent(m));\n      if (v) {\n        if (null == v ? void 0 : v.s1sKeywordsData) {\n          var _ = (v || {}).s1sKeywordsData,\n            E = void 0 === _ ? {} : _,\n            S = E.enterId,\n            I = void 0 === S ? 0 : S,\n            q = E.s1sContextInfo,\n            R = void 0 === q ? \"{}\" : q,\n            T = E.s1sStatInfo,\n            C = void 0 === T ? \"{}\" : T,\n            O = E.sessionId,\n            b = void 0 === O ? \"\" : O,\n            k = E.postype,\n            j = a(decodeURIComponent(R)) || {},\n            w = a(decodeURIComponent(C)) || {},\n            U = w.bizuin,\n            V = void 0 === U ? 0 : U,\n            z = w.msgid,\n            A = void 0 === z ? 0 : z,\n            J = w.msgidx,\n            N = void 0 === J ? 0 : J,\n            D = j.mixerCommonContext,\n            M = void 0 === D ? \"\" : D,\n            Q = (j.isNeedUpdateGPTInfo, j.S1SPageType);\n          if ([2, 5].includes(void 0 === Q ? 1 : Q)) return {\n            thirdExtParam: m\n          };\n          var F = _r({}, j);\n          delete F.mixerCommonContext, f.crossExtReqParams.push({\n            key: \"parentSearchID\",\n            textValue: [g || i(y), I || w.enterId, encodeURIComponent(h), \"\".concat(V, \"_\").concat(A, \"_\").concat(N), encodeURIComponent(JSON.stringify({\n              enterId: I || w.enterId,\n              sessionId: b,\n              s1sContextInfo: F,\n              s1sStatInfo: w,\n              postype: k,\n              mpBizuinMsgidMsgidx: (null == v ? void 0 : v.mp_bizuin_msgid_msgidx) || \"\".concat(V, \"_\").concat(A, \"_\").concat(N),\n              mpFingerSearchQueryPos: null == v ? void 0 : v.mp_finger_search_query_pos\n            }))].join(\":\").replace(/,/g, \";\")\n          }), M && f.crossExtReqParams.push({\n            key: \"mixerCommonContext\",\n            textValue: M\n          });\n        } else f.crossExtReqParams.push({\n          key: \"parentSearchID\",\n          textValue: [g || i(y), 0, encodeURIComponent(h), \"\", encodeURIComponent(JSON.stringify({\n            mpBizuinMsgidMsgidx: null == v ? void 0 : v.mp_bizuin_msgid_msgidx,\n            mpFingerSearchQueryPos: null == v ? void 0 : v.mp_finger_search_query_pos\n          }))].join(\":\").replace(/,/g, \";\")\n        });\n        (null == v ? void 0 : v.mpSelectedContent) && f.sessionExtReqParams.push({\n          key: \"mpSelectedContent\",\n          textValue: v.mpSelectedContent\n        }), (null == v ? void 0 : v.mpSelectActionType) && f.sessionExtReqParams.push({\n          key: \"mpSelectActionType\",\n          textValue: String(v.mpSelectActionType)\n        }), (null == v ? void 0 : v.mp_bizuin_msgid_msgidx) && f.sessionExtReqParams.push({\n          key: \"mpBizuinMsgidMsgidx\",\n          textValue: v.mp_bizuin_msgid_msgidx\n        }), (null == v ? void 0 : v.mp_finger_search_query_context) && f.sessionExtReqParams.push({\n          key: \"mpFingerSearchQueryContext\",\n          textValue: v.mp_finger_search_query_context\n        }), (null == v ? void 0 : v.mp_finger_search_query_pos) && f.sessionExtReqParams.push({\n          key: \"mpFingerSearchQueryPos\",\n          textValue: String(v.mp_finger_search_query_pos)\n        }), ((null == v ? void 0 : v.aiH5Link) || (null == v ? void 0 : v.aiH5Title)) && f.sessionExtReqParams.push({\n          key: \"aiSearchUploadInfo\",\n          textValue: JSON.stringify({\n            uploadFiles: [{\n              fileType: 4,\n              fileContentDetail: {\n                mpContentDetail: {\n                  title: null == v ? void 0 : v.aiH5Title\n                }\n              },\n              url: String(null == v ? void 0 : v.aiH5Link)\n            }],\n            contentType: 4,\n            allowedContentType: 4\n          })\n        });\n      }\n      return (null == c ? void 0 : c.length) && (t = f.crossExtReqParams).push.apply(t, c), (null == u ? void 0 : u.length) && (s = f.sessionExtReqParams).push.apply(s, u), P && Object.keys(P).length && (f.otherJsApiParams = P), console.warn(\"mpThirdExtParamToSearchExtParam extReqParams:\", f), {\n        thirdExtParam: encodeURIComponent(JSON.stringify(f)),\n        extReqParams: JSON.stringify(o(o([], f.crossExtReqParams, !0), f.sessionExtReqParams, !0))\n      };\n    } catch (e) {\n      return console.error(\"mpThirdExtParamToSearchExtParam err:\", e), {\n        thirdExtParam: m\n      };\n    }\n  }\n  var p = {\n    mpThirdExtParamToSearchExtParam: s\n  };\n  t.A;\n    t.Q;\n\n  utils.getInnerHeight();\n  utils.getInnerWidth();\n  (function () {\n      var style = document.createElement('style');\n      style.innerHTML = '*:not(input):not(textarea) { -webkit-touch-callout: none !important; -webkit-user-select: none !important; -khtml-user-select: none !important; -moz-user-select: none !important; -ms-user-select: none !important; user-select: none !important; }';\n      return {\n        enableSelect: function enableSelect() {\n          document.head.contains(style) && document.head.removeChild(style);\n        },\n        disableSelect: function disableSelect() {\n          document.head.appendChild(style);\n        }\n      };\n    })();\n\n  var SearchWordsClassName = 'wx_search_keyword';\n  var SearchWordsBoxClassName = 'wx_search_keyword_wrap';\n  var AdvWordsClassName = 'filter_wx_adv_keyword';\n\n  \n  var checkBadCase = function checkBadCase(keyWordsNodeList, keyWordInfo, reportName) {\n    var hasBadCase = false;\n    var nodeText = keyWordsNodeList.map(function (a) {\n      return a.textContent;\n    }).join(\"\");\n    var keyword = keyWordInfo.keyword,\n      idx_range_list = keyWordInfo.idx_range_list;\n    if (nodeText !== keyword) {\n      window.WX_BJ_REPORT && window.WX_BJ_REPORT.BadJs && window.WX_BJ_REPORT.BadJs.report(reportName, \"biz=\".concat(window.biz, \"&mid=\").concat(window.mid, \"&idx=\").concat(window.idx), {\n        mid: 'mmbizwap:search_business',\n        view: 'wap_business',\n        _info: {\n          keyWordsHTML: keyWordsNodeList.map(function (node) {\n            return node.outerHTML;\n          }).join(''),\n          keyWordInfo: {\n            keyword: keyword,\n            idx_range_list: idx_range_list\n          },\n          url: location.href\n        }\n      });\n      hasBadCase = true;\n    }\n    return hasBadCase;\n  };\n  var renderKeyWord = function renderKeyWord(keywordsData, paragraphList) {\n    var idx_range_list = keywordsData.idx_range_list;\n    var _idx_range_list$ = idx_range_list[0],\n      begin_idx = _idx_range_list$.begin_idx,\n      end_idx = _idx_range_list$.end_idx,\n      section_idx = _idx_range_list$.section_idx;\n    var section = paragraphList[section_idx];\n    if (!section) return [];\n    var keyWordsNodeList = highlightElement({\n      elem: section,\n      startIdx: begin_idx * 1,\n      endIdx: end_idx * 1\n    }, function (elem, curStartIdx) {\n      if ((elem.tagName === 'A' || checkTextColor(elem)) && curStartIdx < elem.textContent.length || elem.classList.contains(AdvWordsClassName) || elem.classList.contains(SearchWordsBoxClassName) || filterTagName.includes(elem.tagName.toLowerCase())) {\n        return true;\n      }\n      return false;\n    });\n    if (keyWordsNodeList.length > 0) {\n      if (checkBadCase(keyWordsNodeList, keywordsData, 's1s_keywords')) return;\n      keyWordsNodeList.forEach(function (node) {\n        node.keywordsData = keywordsData;\n        node.classList.add(SearchWordsBoxClassName);\n      });\n      var lastNode = keyWordsNodeList[keyWordsNodeList.length - 1];\n      var i = document.createElement('i');\n      i.className = SearchWordsClassName;\n      lastNode.appendChild(i);\n    }\n    return keyWordsNodeList;\n  };\n  function addKeywordToHtml(html, keywordsData) {\n    if (!keywordsData) return html;\n    var div = document.createElement('div');\n    div.innerHTML = html;\n    var paraList = getParaListAllNodes(div, {\n      ignorePreloadNode: true,\n      ignoreNotWriteableChildren: true\n    });\n    try {\n      wrapTextNodesWithSpan(paraList);\n      var finalParaList = getParaListAllNodes(div, {\n        ignorePreloadNode: true,\n        ignoreNotWriteableChildren: true\n      });\n      keywordsData.forEach(function (data) {\n        renderKeyWord(data, finalParaList);\n      });\n    } catch (error) {\n      return html;\n    }\n    return div.innerHTML;\n  }\n  function wrapTextNodesWithSpan(paraList) {\n    paraList.forEach(function (textNode) {\n      if (textNode.nodeType === Node.TEXT_NODE) {\n        var span = document.createElement('span');\n        span.className = 'text-node-wrapper';\n        span.textContent = textNode.nodeValue;\n        var parent = textNode.parentNode;\n        if (parent) {\n          parent.replaceChild(span, textNode);\n        }\n      }\n    });\n  }\n\n  var isAllowRender = (Mmversion.isAndroid || Mmversion.isIOS || Mmversion.isWindows || Mmversion.isMac && Mmversion.cpVersion(\"3.8.2\", 1, true, \"mac\")) && Mmversion.isWechat && !Mmversion.isWxWork;\n  Mmversion.isWechat && !Mmversion.isInMiniProgram && (Mmversion.isAndroid && Mmversion.compareHexVersion('28003C37') || Mmversion.isIOS && Mmversion.compareHexVersion('18003B2B'));\n\n  \n  var ltReplaceChar = \"lt-\".concat(Date.now(), \"-\").concat(Math.random());\n  var gtReplaceChar = \"gt-\".concat(Date.now(), \"-\").concat(Math.random());\n  var ltReplaceCharReg = new RegExp(ltReplaceChar, 'g');\n  var gtReplaceCharReg = new RegExp(gtReplaceChar, 'g');\n  function isAudioPage(itemShowType) {\n    return itemShowType * 1 === 7;\n  }\n  function isImagePage(itemShowType) {\n    return itemShowType * 1 === 8;\n  }\n  function replaceTagChar(str, enableTagReg) {\n    var strAfterReplace;\n    while (true) {\n      str = str.replace(enableTagReg, function (match, sub1, sub2, sub3) {\n        return \"\".concat(ltReplaceChar).concat(sub1).concat(gtReplaceChar).concat(sub2).concat(ltReplaceChar).concat(sub3).concat(gtReplaceChar);\n      });\n      if (str !== strAfterReplace) {\n        strAfterReplace = str;\n        continue;\n      }\n      break;\n    }\n    return strAfterReplace;\n  }\n  var __setDesc = function __setDesc(desc, isNoEncode, itemShowType) {\n    var extData = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    function getAttr(s, a) {\n      var m = s.match(new RegExp(a + '\\\\s*=\\\\s*[\"\\']?([^\"\\'\\\\s>]+)[\"\\']?'));\n      return m && m[1];\n    }\n    function getClassAttr(s, a) {\n      var m = s.match(new RegExp(a + '\\\\s*=\\\\s*[\"\\']?([^\"\\'>]+)[\"\\']?'));\n      return m && m[1];\n    }\n    function addFinderTags(desc, finderTransInfo) {\n      var str = desc;\n      if (finderTransInfo.tag_json) {\n        try {\n          var data = JSON.parse(finderTransInfo.tag_json);\n          console.log('[finder] 插入话题标签', data);\n          var topics = data.topic_info;\n          topics.filter(function (topicItem) {\n            return topicItem.topic_type === 1;\n          }).forEach(function (topicItem) {\n            var text = topicItem.topic;\n            var tagHtml = ['<a target=\"_blank\" href=\"javascript:;\" class=\"wx_topic_link\"', \"data-topicid=\\\"\".concat(topicItem.topic_id, \"\\\"\"), \"data-topic=\\\"\".concat(text, \"\\\">#\").concat(text, \"</a>\")].join(' ');\n            str = str.replace(new RegExp(\"#\".concat(text), 'g'), tagHtml);\n          });\n        } catch (e) {\n          console.error('[finder] 插入话题标签失败', e);\n        }\n      }\n      if (finderTransInfo.location_json) {\n        try {\n          var _data = JSON.parse(finderTransInfo.location_json);\n          console.log('[finder] 插入poi标签', _data);\n          var text = _data.poiName;\n          var poiId = _data.poiClassifyId.replace(/^qqmap_/, '');\n          var tagHtml = ['<a target=\"_blank\" href=\"javascript:;\" class=\"js_poi_entry wx_poi_link\"', \"data-poiid=\\\"\".concat(poiId, \"\\\"\"), \"data-name=\\\"\".concat(text, \"\\\"\"), \"data-districtid=\\\"\\\"\", \"data-address=\\\"\".concat(_data.poiAddress, \"\\\"\"), \"data-longitude=\\\"\".concat(_data.longitude, \"\\\"\"), \"data-latitude=\\\"\".concat(_data.latitude, \"\\\"\"), \"data-city=\\\"\".concat(_data.city, \"\\\">\").concat(text, \"</a>\")].join(' ');\n          str += \"\\n\".concat(tagHtml);\n        } catch (e) {\n          console.error('[finder] 插入poi标签失败', e);\n        }\n      }\n      if (finderTransInfo.music_json && false) {\n        try {\n          var dataWrp = JSON.parse(finderTransInfo.music_json);\n          var _data2 = dataWrp.music_info;\n          console.log('[finder] 插入音频标签', _data2);\n          var listenId = _data2.doc_type === 1 ? _data2.doc_id : '';\n          var musicId = _data2.doc_type === 0 ? _data2.doc_id : '';\n          var _text = _data2.name || '原声';\n          var source = _data2.doc_type === 1 ? 0 : _data2.doc_type;\n          if (listenId || musicId) {\n            var _tagHtml = ['<a class=\"js_plain-music_entry wx_plain-music_link wx_tap_link js_wx_tap_highlight\"', \"data-music_name=\\\"\".concat(_text, \"\\\"\"), \"data-singer=\\\"\".concat(_data2.artist || '', \"\\\"\"), \"data-type=\\\"0\\\"\", \"data-music_source=\\\"\".concat(source, \"\\\"\"), \"data-plain_music_id=\\\"\".concat(listenId || musicId, \"\\\">\").concat(_text, \"</a>\")].join(' ');\n            str += \"\\n\".concat(_tagHtml);\n          } else {\n            console.error('[finder] 插入音频标签失败 不支持的音频类型', _data2);\n          }\n        } catch (e) {\n          console.error('[finder] 插入音频标签失败', e);\n        }\n      }\n      console.log('[finder] 最终内容', str);\n      return str;\n    }\n    function filterContentWithLinkNWeapp(str, enableTagReg, preserveS1SReg) {\n      enableTagReg && (str = replaceTagChar(str, enableTagReg));\n      var s1sMatches = [];\n      if (preserveS1SReg) {\n        str = str.replace(preserveS1SReg, function (match) {\n          s1sMatches.push(match);\n          return \"__S1S_PLACEHOLDER_\".concat(s1sMatches.length - 1, \"__\");\n        });\n      }\n      str = str.split(/(<a\\s+\\w[^>]*>)((?:.|\\n)*?)(<\\/a>)/);\n      var valid;\n      for (var i = 0; i < str.length; i++) {\n        if (i % 4 === 1) {\n          valid = false;\n          var href = getAttr(str[i], 'href');\n          if (/^https?:\\/\\/mp\\.weixin\\.qq\\.com/.test(href)) {\n            valid = true;\n          }\n          var r = '<a target=\"_blank\" data-href=\"' + (valid ? href : '') + '\"';\n          var weappId = getAttr(str[i], 'data-miniprogram-appid');\n          var poiLongitude = getAttr(str[i], 'data-longitude');\n          var poiLatitude = getAttr(str[i], 'data-latitude');\n          var bizFakeId = getAttr(str[i], 'data-biz');\n          var topicClass = getAttr(str[i], 'class') || '';\n          var plainMusicId = getAttr(str[i], 'data-plain_music_id') || '';\n          var quoteId = getAttr(str[i], 'data-quote-id');\n          if (poiLongitude && poiLatitude) {\n            r += ' class=\"js_poi_entry wx_poi_link\"' + ' data-poiid=\"' + (getAttr(str[i], 'data-poiid') || '') + '\"' + ' data-districtid=\"' + (getAttr(str[i], 'data-districtid') || '') + '\"' + ' data-name=\"' + (getAttr(str[i], 'data-name') || '') + '\"' + ' data-address=\"' + (getAttr(str[i], 'data-address') || '') + '\"' + ' data-longitude=\"' + poiLongitude + '\"' + ' data-latitude=\"' + poiLatitude + '\"';\n            valid = true;\n          } else if (topicClass && topicClass.includes('wx_topic_link')) {\n            r += ' class=\"wx_topic_link\"' + ' data-topicid=\"' + (getAttr(str[i], 'topic-id') || '') + '\"' + ' data-topic=\"' + (getAttr(str[i], 'data-topic') || '') + '\"';\n            valid = true;\n          } else if (weappId) {\n            r += ' class=\"weapp_text_link\"' +\n            ' data-miniprogram-type=\"text\"' + ' data-miniprogram-appid=\"' + weappId + '\"' + ' data-miniprogram-path=\"' + (getAttr(str[i], 'data-miniprogram-path') || '') + '\"' + ' data-miniprogram-nickname=\"' + (getAttr(str[i], 'data-miniprogram-nickname') || '') + '\"' + ' data-miniprogram-servicetype=\"' + (getAttr(str[i], 'data-miniprogram-servicetype') || '0') + '\"';\n            valid = true;\n          } else if (quoteId) {\n            str[i] = \"<mp-common-blockquote data-quote-id=\\\"\".concat(quoteId, \"\\\">\");\n            str[i + 1] = '';\n            str[i + 2] = \"</mp-common-blockquote>\";\n            i += 3;\n            valid = true;\n            continue;\n          } else if (bizFakeId) {\n            r += \" class=\\\"js_mention_entry wx_at_link\\\" data-username=\\\"\".concat(getAttr(str[i], 'data-username'), \"\\\" data-biz=\\\"\").concat(bizFakeId, \"\\\" \");\n            valid = true;\n          } else if (plainMusicId) {\n            str[i] = str[i].replace('<a', '<mp-common-plain-music');\n            str[i + 1] = \"<canvas class=\\\"js-music-pag\\\" width=\\\"16\\\" height=\\\"16\\\" style=\\\"display:none;margin-right:4px\\\"></canvas><a>\".concat(str[i + 1], \"</a>\");\n            str[i + 2] = \"</mp-common-plain-music>\";\n            i += 3;\n            continue;\n          } else if (getAttr(str[i], 'tagname') === 'mp-common-product') {\n            if (getAttr(str[i], 'data-cardtype') === '2') {\n              str[i] = str[i].replace('<a', '<mp-common-product');\n              str[i + 1] = \"<a class='product_text_link'>\".concat(str[i + 1], \"</a>\");\n              str[i + 2] = \"</mp-common-product>\";\n              i += 3;\n              continue;\n            } else if (getAttr(str[i], 'data-cardtype') === '3') {\n              var customstyle = getAttr(str[i], 'data-customstyle');\n              var customHeight = void 0;\n              if (customstyle) {\n                try {\n                  var _JSON$parse = JSON.parse(customstyle.html(false)),\n                    display = _JSON$parse.display,\n                    height = _JSON$parse.height;\n                  if (display !== 'none') {\n                    customHeight = parseInt(height, 10);\n                  } else {\n                    customHeight = 0;\n                  }\n                } catch (err) {\n                  console.error(err);\n                }\n              } else {\n                var fontScale = getScaleByDom();\n                customHeight = 24 + 44 * fontScale;\n              }\n              str[i] = str[i].replace('<a', \"<section style=\\\"margin: 8px 0;\\\"><div class='wx_img_placeholder' style='height: \".concat(customHeight, \"px'></div><mp-common-product\"));\n              str[i + 1] = '';\n              str[i + 2] = \"</mp-common-product></section>\";\n              i += 3;\n              continue;\n            }\n          } else if (valid) {\n            var className = getClassAttr(str[i], 'class');\n            r += \" class=\\\"js_common_share_desc_link\".concat(className ? \" \".concat(className) : '', \"\\\"\");\n            var _itemShowType = getAttr(str[i], 'data-itemshowtype');\n            _itemShowType && (r += ' data-itemshowtype=\"' + _itemShowType + '\"');\n          }\n          str[i] = valid ? r + '>' : '';\n        } else if (i % 4 === 3) {\n          !valid && (str[i] = '');\n        } else {\n          str[i] = str[i].replace(/<.*?>/g, '');\n        }\n      }\n      str = str.join('');\n      enableTagReg && (str = str.replace(ltReplaceCharReg, '<'));\n      enableTagReg && (str = str.replace(gtReplaceCharReg, '>'));\n      if (preserveS1SReg && s1sMatches.length > 0) {\n        str = str.replace(/__S1S_PLACEHOLDER_(\\d+)__/g, function (_, index) {\n          return s1sMatches[parseInt(index, 10)];\n        });\n      }\n      return str;\n    }\n    function modifySecondRendContent(str) {\n      var blockquoteRegex = /(<mp-common-blockquote\\s+\\w[^>]*>)((?:.|\\n)*?)(<\\/mp-common-blockquote>)/g;\n      console.log('[quote]', extData.quoteList, str, blockquoteRegex.test(blockquoteRegex));\n      str = str.replace(blockquoteRegex, function (match) {\n        var quoteId = getAttr(match, 'data-quote-id');\n        if (!(Array.isArray(extData.quoteList) && extData.quoteList.length > 0)) return '';\n        var quoteItem = extData.quoteList.find(function (item) {\n          return item.quote_id === quoteId;\n        });\n        if (!quoteItem) return '';\n        var content = quoteItem.content;\n        return \"<mp-common-blockquote data-quote-id=\\\"\".concat(quoteId, \"\\\" data-content=\\\"\").concat(content, \"\\\"></mp-common-blockquote>\");\n      });\n      return str;\n    }\n    if (isNoEncode) {\n      if (itemShowType * 1 === 8) {\n        desc = desc.html(false);\n        if (extData.searchKeywordsData && window.cgiData) {\n          window.cgiData.search_keywords = extData.searchKeywordsData;\n        }\n        if (window.cgiData && window.cgiData.search_keywords && isAllowRender) {\n          desc = addKeywordToHtml(desc, window.cgiData.search_keywords);\n        }\n      }\n      var searchKeywordsFilterReg;\n      if (window.cgiData && window.cgiData.search_keywords && isImagePage(itemShowType)) {\n        searchKeywordsFilterReg = window.cgiData.search_keywords.length > 0 ? /<span class=\"wx_search_keyword_wrap\">([\\s\\S]*?)<i class=\"wx_search_keyword\"><\\/i><\\/span>/g : undefined;\n      }\n      if (extData.transAppmsgData && extData.transAppmsgData.trans_type === 1 && extData.transAppmsgData.finder_trans_info) {\n        desc = addFinderTags(desc, extData.transAppmsgData.finder_trans_info);\n      }\n      desc = filterContentWithLinkNWeapp(desc, isAudioPage(itemShowType) ? /<(span[^>]+?textstyle[^>]+?)>([\\s\\S]+?)<(\\/span)>/g : undefined, searchKeywordsFilterReg);\n      desc = modifySecondRendContent(desc);\n      desc = window.__emojiFormat(desc.replace(/\\r/g, '').replace(/\\n/g, '<br>'));\n    } else {\n      desc = desc.replace(/\\r/g, '').replace(/\\n/g, '<br>').replace(/\\s/g, '&nbsp;');\n    }\n    if (itemShowType * 1 === 8) {\n      var descDom = document.getElementById('js_image_desc');\n      descDom && (descDom.innerHTML = desc);\n      if (location.href.indexOf('immerse_style=1') > -1 && descDom) {\n        var r = window.innerHeight - descDom.getBoundingClientRect().y - document.getElementById('wx_expand_bottom').offsetHeight;\n        var l = window.getComputedStyle(descDom).lineHeight;\n        window.__immersiveFullDesc = desc;\n        window.__immersiveOmited = 1;\n        textOverflow(descDom, {\n          value: {\n            lineClamp: Math.floor(r / parseFloat(l)),\n            html: '... <span style=\"color:var(--weui-LINK)\">展开</span>'\n          }\n        });\n      }\n    } else if (itemShowType * 1 === 10) {\n      var dom = document.querySelector('.js_share_notice_dom');\n      var _descDom = document.getElementById('js_text_desc');\n      _descDom && (_descDom.innerHTML = desc);\n      if (extData.superVoteId) dom && dom.classList.add('no_min_height');\n      var titleDom = document.getElementById('js_text_title');\n      var titleRect = titleDom ? titleDom.getBoundingClientRect() : undefined;\n      var descRect = _descDom ? _descDom.getBoundingClientRect() : undefined;\n      if (titleRect && titleRect.height > 17 * 1.4 + 2 || descRect && descRect.height > 17 * 1.6 + 2 || extData.superVoteId) {\n        dom && dom.classList.add('text_align_left');\n      }\n    } else if (isAudioPage(itemShowType)) {\n      document.querySelector('#js_audio_desc') && (document.querySelector('#js_audio_desc').innerHTML = desc);\n    } else {\n      var _descDom2 = document.getElementById('js_common_share_desc');\n      var descDomWrap = document.getElementById('js_common_share_desc_wrap');\n      if (!_descDom2 || !descDomWrap) {\n        return;\n      }\n      _descDom2.innerHTML = desc;\n      if (itemShowType * 1 !== 5) {\n        setTimeout(function () {\n          var folderSwitcher = document.getElementById('js_folder_text_switch');\n          if (_descDom2.offsetHeight - descDomWrap.offsetHeight > 1) {\n            descDomWrap.className += ' weui-ellipsis_multi';\n            folderSwitcher.style.display = 'block';\n          } else {\n            folderSwitcher.style.display = 'none';\n          }\n        }, 300);\n      }\n    }\n  };\n  if (!window.__second_open__) {\n    var videoContentNoEncode = window.a_value_which_never_exists || '';\n    var TextContentNoEncode = window.a_value_which_never_exists || '';\n    var ContentNoEncode = window.a_value_which_never_exists || '';\n    var itemShowType = window.a_value_which_never_exists || '5';\n    var content = window.a_value_which_never_exists || '';\n    var desc = window.a_value_which_never_exists || '';\n    var superVoteId = window.a_value_which_never_exists || '';\n    var quoteList = null;\n    try {\n      quoteList = JSON.parse('[]');\n    } catch (e) {\n      console.error(e);\n    }\n    var extData = {\n      superVoteId: superVoteId,\n      quoteList: quoteList,\n      isFinderImage: false,\n      transAppmsgData: +itemShowType === 8 ? window.cgiData && window.cgiData.trans_appmsg_info : null\n    };\n    if (videoContentNoEncode) {\n      __setDesc(videoContentNoEncode, true, itemShowType, extData);\n    } else if (itemShowType * 1 === 10 && (ContentNoEncode || superVoteId) || isAudioPage(itemShowType) && ContentNoEncode) {\n      __setDesc(ContentNoEncode, true, itemShowType, extData);\n    } else if (TextContentNoEncode) {\n      __setDesc(TextContentNoEncode, true, itemShowType, extData);\n    } else if (itemShowType * 1 === 8) {\n      __setDesc(content || desc, true, itemShowType, extData);\n    } else {\n      __setDesc(desc, false, itemShowType, extData);\n    }\n    window.__setDesc = __setDesc;\n  }\n\n  return __setDesc;\n\n})();\n  </script>\n </div>\n</div>\n",
  "publish_time": 1751373277,
  "mp_id": "MP_WXS_3078784632",
  "pic_url": "http://mmbiz.qpic.cn/sz_mmbiz_jpg/gNu2xianeicdG3dQtK3ic3X0RjqwuvNibkAfz5rNdEna4xCmCHI7Yn9YcWAfaNBYSo09h9d5HLMypaRH9sOib4LbspQ/0?wx_fmt=jpeg",
  "mp_name": "长沙观察"
}