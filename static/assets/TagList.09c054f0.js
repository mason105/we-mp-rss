import{l as V,d as L}from"./tagManagement.b33c834a.js";import{_ as M,d as P,r as p,k as A,q as W,e as $,c as a,w as t,M as y,j as s,o as i,m as n,l as d,t as B,f as j,p as q}from"./index.cdebe15e.js";const I={class:"tag-list"},R={key:0,class:"load-more"},U={class:"total-count"},G=P({__name:"TagList",setup(H){const g=p(!1),c=p(!1),_=p([]),u=p({current:1,pageSize:10,total:0}),k=p(window.innerWidth<768),E=()=>{k.value=window.innerWidth<768};A(()=>{window.addEventListener("resize",E)}),W(()=>{window.removeEventListener("resize",E)});const m=async(o=!1)=>{try{o?c.value=!0:g.value=!0;const e=await V({offset:(u.value.current-1)*u.value.pageSize,limit:u.value.pageSize});console.log(e),o?_.value=[..._.value,...e.list||[]]:_.value=e.list||[],u.value.total=e.total||0}catch{y.error("\u83B7\u53D6\u6807\u7B7E\u5217\u8868\u5931\u8D25")}finally{o?c.value=!1:g.value=!1}},C=async o=>{try{await L(o),y.success("\u5220\u9664\u6210\u529F"),m()}catch{y.error("\u5220\u9664\u5931\u8D25")}},w=o=>{u.value.current=o,m()};return A(()=>{m()}),(o,e)=>{const r=s("a-button"),D=s("a-page-header"),v=s("a-table-column"),f=s("a-tag"),x=s("a-popconfirm"),z=s("a-space"),b=s("a-table"),T=s("a-list-item-meta"),S=s("a-list-item"),N=s("a-list"),O=s("a-card");return i(),$("div",I,[a(D,{title:"\u6807\u7B7E\u7BA1\u7406",subtitle:"\u7BA1\u7406\u6587\u7AE0\u6807\u7B7E"},{extra:t(()=>[a(r,{type:"primary",onClick:e[0]||(e[0]=l=>o.$router.push("/tags/add"))},{default:t(()=>e[2]||(e[2]=[n(" \u6DFB\u52A0\u6807\u7B7E ")])),_:1,__:[2]})]),_:1}),a(O,null,{default:t(()=>[k.value?(i(),d(N,{key:1,loading:g.value,"loading-more":c.value,data:_.value,pagination:u.value,onPageChange:w},{item:t(({item:l})=>[a(S,null,{default:t(()=>[a(T,null,{title:t(()=>[n(B(l.name)+" ",1),l.status===1?(i(),d(f,{key:0,color:"green",size:"small"},{default:t(()=>e[7]||(e[7]=[n("\u542F\u7528")])),_:1,__:[7]})):(i(),d(f,{key:1,color:"red",size:"small"},{default:t(()=>e[8]||(e[8]=[n("\u7981\u7528")])),_:1,__:[8]}))]),description:t(()=>[n(" \u521B\u5EFA\u65F6\u95F4: "+B(l.created_at),1)]),_:2},1024),a(z,null,{default:t(()=>[a(r,{type:"text",size:"small",onClick:F=>o.$router.push(`/tags/edit/${l.id}`)},{default:t(()=>e[9]||(e[9]=[n(" \u7F16\u8F91 ")])),_:2,__:[9]},1032,["onClick"]),a(x,{content:"\u786E\u8BA4\u5220\u9664\u8BE5\u6807\u7B7E\uFF1F",onOk:F=>C(l.id)},{default:t(()=>[a(r,{type:"text",status:"danger",size:"small"},{default:t(()=>e[10]||(e[10]=[n("\u5220\u9664")])),_:1,__:[10]})]),_:2},1032,["onOk"])]),_:2},1024)]),_:2},1024)]),footer:t(()=>[u.value.current*u.value.pageSize<u.value.total?(i(),$("div",R,[a(r,{type:"primary",loading:c.value,onClick:e[1]||(e[1]=()=>{u.value.current++,m(!0)})},{default:t(()=>e[11]||(e[11]=[n(" \u52A0\u8F7D\u66F4\u591A ")])),_:1,__:[11]},8,["loading"]),j("div",U," \u5171 "+B(u.value.total)+" \u6761 ",1)])):q("",!0)]),_:1},8,["loading","loading-more","data","pagination"])):(i(),d(b,{key:0,loading:g.value,data:_.value,pagination:u.value,onPageChange:w},{columns:t(()=>[a(v,{title:"\u6807\u7B7E\u540D\u79F0","data-index":"name"}),a(v,{title:"\u72B6\u6001","data-index":"status"},{cell:t(({record:l})=>[l.status===1?(i(),d(f,{key:0,color:"green"},{default:t(()=>e[3]||(e[3]=[n("\u542F\u7528")])),_:1,__:[3]})):(i(),d(f,{key:1,color:"red"},{default:t(()=>e[4]||(e[4]=[n("\u7981\u7528")])),_:1,__:[4]}))]),_:1}),a(v,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"created_at"}),a(v,{title:"\u64CD\u4F5C"},{cell:t(({record:l})=>[a(z,null,{default:t(()=>[a(r,{type:"text",onClick:F=>o.$router.push(`/tags/edit/${l.id}`)},{default:t(()=>e[5]||(e[5]=[n(" \u7F16\u8F91 ")])),_:2,__:[5]},1032,["onClick"]),a(x,{content:"\u786E\u8BA4\u5220\u9664\u8BE5\u6807\u7B7E\uFF1F",onOk:F=>C(l.id)},{default:t(()=>[a(r,{type:"text",status:"danger"},{default:t(()=>e[6]||(e[6]=[n("\u5220\u9664")])),_:1,__:[6]})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1})]),_:1},8,["loading","data","pagination"]))]),_:1})])}}});var Q=M(G,[["__scopeId","data-v-18d959e0"]]);export{Q as default};
